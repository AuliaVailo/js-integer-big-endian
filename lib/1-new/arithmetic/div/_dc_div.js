"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports._dc_div = _dc_div;


/**
 * Input
 * -----
 *  - No leading zeros
 *  - |A| = |C|
 *
 * References
 * ----------
 *   - https://gmplib.org/manual/Divide-and-Conquer-Division.html
 *
 */
function _dc_div(X, a, ai, aj, b, bi, bj, c, ci, cj) {

	// [BZ98] Fast Recursive Division

	var r = aj - ai;
	var s = bj - bi;

	if (r < s || r === s && _CMP_n(a, ai, aj, b, bi) < 0) return;

	// shift to get n = 2^k for some k
	var _n = 1;

	while (_n < s) {
		_n <<= 1;
	}var n = _n;

	var shift = n - s;

	var x = b[bi];
	var _X = X / 2;
	var _normalize = x < _X;
	var z = Math.ceil(_X / x);

	var w = r + shift + (_normalize || a[ai] >= _X);
	var t = Math.ceil(w / n);
	var _ai = 0;
	var _aj = t * n; // + 1 if
	var _a = _zeros(_aj); // potential normalization overflow
	var _ak = _aj - shift - r; // or if A potentially bigger than B
	_copy(a, ai, aj, _a, _ak);

	var _bi = 0;
	var _bj = n;
	var _b = _zeros(n);
	_copy(b, bi, bj, _b, 0);

	if (_normalize) {

		_imul_limb(X, z, _a, _ai, _aj);
		_imul_limb(X, z, _b, _bi, _bj);
	}

	var _cj = _aj;
	var _c = _zeros(_cj);

	for (var i = 0; i < _aj - n; i += n) {

		_dc_div_21(X, _a, i, i + (n << 1), _b, _bi, _bj, _c, i, i + (n << 1));
	}

	if (_normalize) {
		var p = _mod_limb(X, z, _a, _ai, _ak);
		_div_limb_partial_fast(X, p, z, _a, _ak, _aj - shift, a, ai, aj);
	} else {
		_copy(_a, _ak, _aj - shift, a, ai, aj);
	}

	_copy(_c, _cj - r, _cj, c, ci);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy8xLW5ldy9hcml0aG1ldGljL2Rpdi9fZGNfZGl2LmpzIl0sIm5hbWVzIjpbIl9kY19kaXYiLCJYIiwiYSIsImFpIiwiYWoiLCJiIiwiYmkiLCJiaiIsImMiLCJjaSIsImNqIiwiciIsInMiLCJfQ01QX24iLCJfbiIsIm4iLCJzaGlmdCIsIngiLCJfWCIsIl9ub3JtYWxpemUiLCJ6IiwiTWF0aCIsImNlaWwiLCJ3IiwidCIsIl9haSIsIl9haiIsIl9hIiwiX3plcm9zIiwiX2FrIiwiX2NvcHkiLCJfYmkiLCJfYmoiLCJfYiIsIl9pbXVsX2xpbWIiLCJfY2oiLCJfYyIsImkiLCJfZGNfZGl2XzIxIiwicCIsIl9tb2RfbGltYiIsIl9kaXZfbGltYl9wYXJ0aWFsX2Zhc3QiXSwibWFwcGluZ3MiOiI7Ozs7O1FBYWdCQSxPLEdBQUFBLE87OztBQVhoQjs7Ozs7Ozs7Ozs7QUFXTyxTQUFTQSxPQUFULENBQW1CQyxDQUFuQixFQUF1QkMsQ0FBdkIsRUFBMkJDLEVBQTNCLEVBQWdDQyxFQUFoQyxFQUFxQ0MsQ0FBckMsRUFBeUNDLEVBQXpDLEVBQThDQyxFQUE5QyxFQUFtREMsQ0FBbkQsRUFBdURDLEVBQXZELEVBQTREQyxFQUE1RCxFQUFpRTs7QUFFdkU7O0FBRUEsS0FBTUMsSUFBSVAsS0FBS0QsRUFBZjtBQUNBLEtBQU1TLElBQUlMLEtBQUtELEVBQWY7O0FBRUEsS0FBS0ssSUFBSUMsQ0FBSixJQUFTRCxNQUFNQyxDQUFOLElBQVdDLE9BQVFYLENBQVIsRUFBWUMsRUFBWixFQUFpQkMsRUFBakIsRUFBc0JDLENBQXRCLEVBQTBCQyxFQUExQixJQUFpQyxDQUExRCxFQUE4RDs7QUFFOUQ7QUFDQSxLQUFJUSxLQUFLLENBQVQ7O0FBRUEsUUFBUUEsS0FBTUYsQ0FBZDtBQUFrQkUsU0FBTyxDQUFQO0FBQWxCLEVBRUEsSUFBTUMsSUFBSUQsRUFBVjs7QUFFQSxLQUFNRSxRQUFRRCxJQUFJSCxDQUFsQjs7QUFFQSxLQUFNSyxJQUFJWixFQUFFQyxFQUFGLENBQVY7QUFDQSxLQUFNWSxLQUFLakIsSUFBSSxDQUFmO0FBQ0EsS0FBTWtCLGFBQWFGLElBQUlDLEVBQXZCO0FBQ0EsS0FBTUUsSUFBSUMsS0FBS0MsSUFBTCxDQUFXSixLQUFLRCxDQUFoQixDQUFWOztBQUVBLEtBQU1NLElBQUlaLElBQUlLLEtBQUosSUFBY0csY0FBY2pCLEVBQUVDLEVBQUYsS0FBU2UsRUFBckMsQ0FBVjtBQUNBLEtBQU1NLElBQUlILEtBQUtDLElBQUwsQ0FBV0MsSUFBSVIsQ0FBZixDQUFWO0FBQ0EsS0FBTVUsTUFBTSxDQUFaO0FBQ0EsS0FBTUMsTUFBTUYsSUFBSVQsQ0FBaEIsQ0ExQnVFLENBMEJ4QztBQUMvQixLQUFNWSxLQUFLQyxPQUFRRixHQUFSLENBQVgsQ0EzQnVFLENBMkJ4QztBQUMvQixLQUFNRyxNQUFNSCxNQUFNVixLQUFOLEdBQWNMLENBQTFCLENBNUJ1RSxDQTRCeEM7QUFDL0JtQixPQUFPNUIsQ0FBUCxFQUFXQyxFQUFYLEVBQWdCQyxFQUFoQixFQUFxQnVCLEVBQXJCLEVBQTBCRSxHQUExQjs7QUFFQSxLQUFNRSxNQUFNLENBQVo7QUFDQSxLQUFNQyxNQUFNakIsQ0FBWjtBQUNBLEtBQU1rQixLQUFLTCxPQUFRYixDQUFSLENBQVg7QUFDQWUsT0FBT3pCLENBQVAsRUFBV0MsRUFBWCxFQUFnQkMsRUFBaEIsRUFBcUIwQixFQUFyQixFQUEwQixDQUExQjs7QUFFQSxLQUFLZCxVQUFMLEVBQWtCOztBQUVqQmUsYUFBWWpDLENBQVosRUFBZ0JtQixDQUFoQixFQUFvQk8sRUFBcEIsRUFBeUJGLEdBQXpCLEVBQStCQyxHQUEvQjtBQUNBUSxhQUFZakMsQ0FBWixFQUFnQm1CLENBQWhCLEVBQW9CYSxFQUFwQixFQUF5QkYsR0FBekIsRUFBK0JDLEdBQS9CO0FBRUE7O0FBRUQsS0FBTUcsTUFBTVQsR0FBWjtBQUNBLEtBQU1VLEtBQUtSLE9BQVFPLEdBQVIsQ0FBWDs7QUFFQSxNQUFNLElBQUlFLElBQUksQ0FBZCxFQUFrQkEsSUFBSVgsTUFBTVgsQ0FBNUIsRUFBZ0NzQixLQUFLdEIsQ0FBckMsRUFBeUM7O0FBRXhDdUIsYUFBWXJDLENBQVosRUFBZ0IwQixFQUFoQixFQUFxQlUsQ0FBckIsRUFBeUJBLEtBQU10QixLQUFLLENBQVgsQ0FBekIsRUFBMENrQixFQUExQyxFQUErQ0YsR0FBL0MsRUFBcURDLEdBQXJELEVBQTJESSxFQUEzRCxFQUFnRUMsQ0FBaEUsRUFBb0VBLEtBQU10QixLQUFLLENBQVgsQ0FBcEU7QUFFQTs7QUFFRCxLQUFLSSxVQUFMLEVBQWtCO0FBQ2pCLE1BQU1vQixJQUFJQyxVQUFXdkMsQ0FBWCxFQUFlbUIsQ0FBZixFQUFtQk8sRUFBbkIsRUFBd0JGLEdBQXhCLEVBQThCSSxHQUE5QixDQUFWO0FBQ0FZLHlCQUF3QnhDLENBQXhCLEVBQTRCc0MsQ0FBNUIsRUFBZ0NuQixDQUFoQyxFQUFvQ08sRUFBcEMsRUFBeUNFLEdBQXpDLEVBQStDSCxNQUFNVixLQUFyRCxFQUE2RGQsQ0FBN0QsRUFBaUVDLEVBQWpFLEVBQXNFQyxFQUF0RTtBQUNBLEVBSEQsTUFJSztBQUNKMEIsUUFBT0gsRUFBUCxFQUFZRSxHQUFaLEVBQWtCSCxNQUFNVixLQUF4QixFQUFnQ2QsQ0FBaEMsRUFBb0NDLEVBQXBDLEVBQXlDQyxFQUF6QztBQUNBOztBQUVEMEIsT0FBT00sRUFBUCxFQUFZRCxNQUFNeEIsQ0FBbEIsRUFBc0J3QixHQUF0QixFQUE0QjNCLENBQTVCLEVBQWdDQyxFQUFoQztBQUVBIiwiZmlsZSI6Il9kY19kaXYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLyoqXG4gKiBJbnB1dFxuICogLS0tLS1cbiAqICAtIE5vIGxlYWRpbmcgemVyb3NcbiAqICAtIHxBfCA9IHxDfFxuICpcbiAqIFJlZmVyZW5jZXNcbiAqIC0tLS0tLS0tLS1cbiAqICAgLSBodHRwczovL2dtcGxpYi5vcmcvbWFudWFsL0RpdmlkZS1hbmQtQ29ucXVlci1EaXZpc2lvbi5odG1sXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gX2RjX2RpdiAoIFggLCBhICwgYWkgLCBhaiAsIGIgLCBiaSAsIGJqICwgYyAsIGNpICwgY2ogKSB7XG5cblx0Ly8gW0JaOThdIEZhc3QgUmVjdXJzaXZlIERpdmlzaW9uXG5cblx0Y29uc3QgciA9IGFqIC0gYWkgO1xuXHRjb25zdCBzID0gYmogLSBiaSA7XG5cblx0aWYgKCByIDwgcyB8fCByID09PSBzICYmIF9DTVBfbiggYSAsIGFpICwgYWogLCBiICwgYmkgKSA8IDAgKSByZXR1cm4gO1xuXG5cdC8vIHNoaWZ0IHRvIGdldCBuID0gMl5rIGZvciBzb21lIGtcblx0bGV0IF9uID0gMSA7XG5cblx0d2hpbGUgKCBfbiAgPCBzICkgX24gPDw9IDEgO1xuXG5cdGNvbnN0IG4gPSBfbiA7XG5cblx0Y29uc3Qgc2hpZnQgPSBuIC0gcyA7XG5cblx0Y29uc3QgeCA9IGJbYmldIDtcblx0Y29uc3QgX1ggPSBYIC8gMiA7XG5cdGNvbnN0IF9ub3JtYWxpemUgPSB4IDwgX1ggO1xuXHRjb25zdCB6ID0gTWF0aC5jZWlsKCBfWCAvIHggKSA7XG5cblx0Y29uc3QgdyA9IHIgKyBzaGlmdCArICggX25vcm1hbGl6ZSB8fCBhW2FpXSA+PSBfWCApIDtcblx0Y29uc3QgdCA9IE1hdGguY2VpbCggdyAvIG4gKSA7XG5cdGNvbnN0IF9haSA9IDAgO1xuXHRjb25zdCBfYWogPSB0ICogbiA7ICAgICAgICAgICAgLy8gKyAxIGlmXG5cdGNvbnN0IF9hID0gX3plcm9zKCBfYWogKSA7ICAgICAvLyBwb3RlbnRpYWwgbm9ybWFsaXphdGlvbiBvdmVyZmxvd1xuXHRjb25zdCBfYWsgPSBfYWogLSBzaGlmdCAtIHIgOyAgLy8gb3IgaWYgQSBwb3RlbnRpYWxseSBiaWdnZXIgdGhhbiBCXG5cdF9jb3B5KCBhICwgYWkgLCBhaiAsIF9hICwgX2FrICkgO1xuXG5cdGNvbnN0IF9iaSA9IDAgO1xuXHRjb25zdCBfYmogPSBuIDtcblx0Y29uc3QgX2IgPSBfemVyb3MoIG4gKSA7XG5cdF9jb3B5KCBiICwgYmkgLCBiaiAsIF9iICwgMCApIDtcblxuXHRpZiAoIF9ub3JtYWxpemUgKSB7XG5cblx0XHRfaW11bF9saW1iKCBYICwgeiAsIF9hICwgX2FpICwgX2FqICkgO1xuXHRcdF9pbXVsX2xpbWIoIFggLCB6ICwgX2IgLCBfYmkgLCBfYmogKSA7XG5cblx0fVxuXG5cdGNvbnN0IF9jaiA9IF9haiA7XG5cdGNvbnN0IF9jID0gX3plcm9zKCBfY2ogKSA7XG5cblx0Zm9yICggbGV0IGkgPSAwIDsgaSA8IF9haiAtIG4gOyBpICs9IG4gKSB7XG5cblx0XHRfZGNfZGl2XzIxKCBYICwgX2EgLCBpICwgaSArICggbiA8PCAxICkgLCBfYiAsIF9iaSAsIF9iaiAsIF9jICwgaSAsIGkgKyAoIG4gPDwgMSApICkgO1xuXG5cdH1cblxuXHRpZiAoIF9ub3JtYWxpemUgKSB7XG5cdFx0Y29uc3QgcCA9IF9tb2RfbGltYiggWCAsIHogLCBfYSAsIF9haSAsIF9hayApIDtcblx0XHRfZGl2X2xpbWJfcGFydGlhbF9mYXN0KCBYICwgcCAsIHogLCBfYSAsIF9hayAsIF9haiAtIHNoaWZ0ICwgYSAsIGFpICwgYWogKSA7XG5cdH1cblx0ZWxzZSB7XG5cdFx0X2NvcHkoIF9hICwgX2FrICwgX2FqIC0gc2hpZnQgLCBhICwgYWkgLCBhaiApIDtcblx0fVxuXG5cdF9jb3B5KCBfYyAsIF9jaiAtIHIgLCBfY2ogLCBjICwgY2kgKSA7XG5cbn1cbiJdfQ==