"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.schoolbook_div = schoolbook_div;

/**
 * Computes q <- a / b and a <- a % b.
 * No leading zeros allowed.
 * q has length at least qi + aj - ai
 */
function schoolbook_div(r, a, ai, aj, b, bi, bj, q, qi) {

	var _r = Math.ceil(r / 2);
	var x = b[bi];

	if (x < _r) {

		// we need x to be >= _r so we multiply b by ceil( _r / x )
		// this gives us <= ( 1 + _r / x ) b < r^(bj-bi)
		// (this can be implemented faster using bit shifts if r = 2^k )
		var z = Math.ceil(_r / x);
		var m = aj - ai + 1;
		var n = bj - bi;

		var _a = _zeros(m);
		_mul_limb(r, z, a, ai, aj, _a, 0, m);

		var _b = _zeros(n);
		_mul_limb(r, z, b, bi, bj, _b, 0, n);

		var _q = _zeros(m);

		_schoolbook_div(r, _a, 0, m, _b, 0, n, _q, 0);
		_div_limb_partial_fast(r, _a[0], z, _a, 1, m, a, ai);
		_copy(_q, 1, m, q, qi);
		return;
	}

	return _schoolbook_div(r, a, ai, aj, b, bi, bj, q, qi);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy8xLW5ldy9hcml0aG1ldGljL2Rpdi9zY2hvb2xib29rX2Rpdi5qcyJdLCJuYW1lcyI6WyJzY2hvb2xib29rX2RpdiIsInIiLCJhIiwiYWkiLCJhaiIsImIiLCJiaSIsImJqIiwicSIsInFpIiwiX3IiLCJNYXRoIiwiY2VpbCIsIngiLCJ6IiwibSIsIm4iLCJfYSIsIl96ZXJvcyIsIl9tdWxfbGltYiIsIl9iIiwiX3EiLCJfc2Nob29sYm9va19kaXYiLCJfZGl2X2xpbWJfcGFydGlhbF9mYXN0IiwiX2NvcHkiXSwibWFwcGluZ3MiOiI7Ozs7O1FBTWdCQSxjLEdBQUFBLGM7O0FBTGhCOzs7OztBQUtPLFNBQVNBLGNBQVQsQ0FBMEJDLENBQTFCLEVBQThCQyxDQUE5QixFQUFrQ0MsRUFBbEMsRUFBdUNDLEVBQXZDLEVBQTRDQyxDQUE1QyxFQUFnREMsRUFBaEQsRUFBcURDLEVBQXJELEVBQTBEQyxDQUExRCxFQUE4REMsRUFBOUQsRUFBbUU7O0FBRXpFLEtBQU1DLEtBQUtDLEtBQUtDLElBQUwsQ0FBV1gsSUFBSSxDQUFmLENBQVg7QUFDQSxLQUFNWSxJQUFJUixFQUFFQyxFQUFGLENBQVY7O0FBRUEsS0FBS08sSUFBSUgsRUFBVCxFQUFjOztBQUViO0FBQ0E7QUFDQTtBQUNBLE1BQU1JLElBQUlILEtBQUtDLElBQUwsQ0FBV0YsS0FBS0csQ0FBaEIsQ0FBVjtBQUNBLE1BQU1FLElBQUlYLEtBQUtELEVBQUwsR0FBVSxDQUFwQjtBQUNBLE1BQU1hLElBQUlULEtBQUtELEVBQWY7O0FBRUEsTUFBTVcsS0FBS0MsT0FBUUgsQ0FBUixDQUFYO0FBQ0FJLFlBQVdsQixDQUFYLEVBQWVhLENBQWYsRUFBbUJaLENBQW5CLEVBQXVCQyxFQUF2QixFQUE0QkMsRUFBNUIsRUFBaUNhLEVBQWpDLEVBQXNDLENBQXRDLEVBQTBDRixDQUExQzs7QUFFQSxNQUFNSyxLQUFLRixPQUFRRixDQUFSLENBQVg7QUFDQUcsWUFBV2xCLENBQVgsRUFBZWEsQ0FBZixFQUFtQlQsQ0FBbkIsRUFBdUJDLEVBQXZCLEVBQTRCQyxFQUE1QixFQUFpQ2EsRUFBakMsRUFBc0MsQ0FBdEMsRUFBMENKLENBQTFDOztBQUVBLE1BQU1LLEtBQUtILE9BQVFILENBQVIsQ0FBWDs7QUFFQU8sa0JBQWlCckIsQ0FBakIsRUFBcUJnQixFQUFyQixFQUEwQixDQUExQixFQUE4QkYsQ0FBOUIsRUFBa0NLLEVBQWxDLEVBQXVDLENBQXZDLEVBQTJDSixDQUEzQyxFQUErQ0ssRUFBL0MsRUFBb0QsQ0FBcEQ7QUFDQUUseUJBQXdCdEIsQ0FBeEIsRUFBNEJnQixHQUFHLENBQUgsQ0FBNUIsRUFBb0NILENBQXBDLEVBQXdDRyxFQUF4QyxFQUE2QyxDQUE3QyxFQUFpREYsQ0FBakQsRUFBcURiLENBQXJELEVBQXlEQyxFQUF6RDtBQUNBcUIsUUFBT0gsRUFBUCxFQUFZLENBQVosRUFBZ0JOLENBQWhCLEVBQW9CUCxDQUFwQixFQUF3QkMsRUFBeEI7QUFDQTtBQUVBOztBQUVELFFBQU9hLGdCQUFpQnJCLENBQWpCLEVBQXFCQyxDQUFyQixFQUF5QkMsRUFBekIsRUFBOEJDLEVBQTlCLEVBQW1DQyxDQUFuQyxFQUF1Q0MsRUFBdkMsRUFBNENDLEVBQTVDLEVBQWlEQyxDQUFqRCxFQUFxREMsRUFBckQsQ0FBUDtBQUVBIiwiZmlsZSI6InNjaG9vbGJvb2tfZGl2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIENvbXB1dGVzIHEgPC0gYSAvIGIgYW5kIGEgPC0gYSAlIGIuXG4gKiBObyBsZWFkaW5nIHplcm9zIGFsbG93ZWQuXG4gKiBxIGhhcyBsZW5ndGggYXQgbGVhc3QgcWkgKyBhaiAtIGFpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2hvb2xib29rX2RpdiAoIHIgLCBhICwgYWkgLCBhaiAsIGIgLCBiaSAsIGJqICwgcSAsIHFpICkge1xuXG5cdGNvbnN0IF9yID0gTWF0aC5jZWlsKCByIC8gMiApIDtcblx0Y29uc3QgeCA9IGJbYmldIDtcblxuXHRpZiAoIHggPCBfciApIHtcblxuXHRcdC8vIHdlIG5lZWQgeCB0byBiZSA+PSBfciBzbyB3ZSBtdWx0aXBseSBiIGJ5IGNlaWwoIF9yIC8geCApXG5cdFx0Ly8gdGhpcyBnaXZlcyB1cyA8PSAoIDEgKyBfciAvIHggKSBiIDwgcl4oYmotYmkpXG5cdFx0Ly8gKHRoaXMgY2FuIGJlIGltcGxlbWVudGVkIGZhc3RlciB1c2luZyBiaXQgc2hpZnRzIGlmIHIgPSAyXmsgKVxuXHRcdGNvbnN0IHogPSBNYXRoLmNlaWwoIF9yIC8geCApIDtcblx0XHRjb25zdCBtID0gYWogLSBhaSArIDEgO1xuXHRcdGNvbnN0IG4gPSBiaiAtIGJpIDtcblxuXHRcdGNvbnN0IF9hID0gX3plcm9zKCBtICkgO1xuXHRcdF9tdWxfbGltYiggciAsIHogLCBhICwgYWkgLCBhaiAsIF9hICwgMCAsIG0gKSA7XG5cblx0XHRjb25zdCBfYiA9IF96ZXJvcyggbiApIDtcblx0XHRfbXVsX2xpbWIoIHIgLCB6ICwgYiAsIGJpICwgYmogLCBfYiAsIDAgLCBuICkgO1xuXG5cdFx0Y29uc3QgX3EgPSBfemVyb3MoIG0gKSA7XG5cblx0XHRfc2Nob29sYm9va19kaXYoIHIgLCBfYSAsIDAgLCBtICwgX2IgLCAwICwgbiAsIF9xICwgMCApIDtcblx0XHRfZGl2X2xpbWJfcGFydGlhbF9mYXN0KCByICwgX2FbMF0gLCB6ICwgX2EgLCAxICwgbSAsIGEgLCBhaSApIDtcblx0XHRfY29weSggX3EgLCAxICwgbSAsIHEgLCBxaSApIDtcblx0XHRyZXR1cm4gO1xuXG5cdH1cblxuXHRyZXR1cm4gX3NjaG9vbGJvb2tfZGl2KCByICwgYSAsIGFpICwgYWogLCBiICwgYmkgLCBiaiAsIHEgLCBxaSApIDtcblxufVxuIl19