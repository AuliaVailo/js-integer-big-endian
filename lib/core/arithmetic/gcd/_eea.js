'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports._eaa = _eaa;

var _api = require('../../../api');

var _ADD = require('../../../core/arithmetic/ADD');

var _array = require('../../../core/array');

var _compare = require('../../../core/compare');

var _convert = require('../../../core/convert');

/**
 * Extended Euclidean algorithm.
 *
 * @see https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm
 *
 * Given two input integers a and b, a > b.
 * Let r_0 = a, r_1 = b,
 *     s_0 = 1, s_1 = 0,
 *     t_0 = 0, t_1 = 1 (Fibonacci :winkemoji:).
 *
 * Let r_{i+1} = r_{i-1} % r_i             (division remainder)
 * Let q_i = (r_{i-1} - r_{i+1}) / r_i > 0 (division quotient)
 *
 * An alternative definition is
 * r_{i+1} = r_{i-1} - q_i r_i       (with 0 <= r_{i+1} < r_i)
 *
 * Then define
 * s_{i+1} = s_{i-1} - q_i s_i
 * t_{i+1} = t_{i-1} - q_i t_i
 *
 * Let k be such that r_i > 0 for all i <= k and r_{k+1} = 0.
 *
 * Since q_i > 0, if t_{i-1} > 0 and t_i < 0 then t_{i+1} > 0. On the other
 * hand, if t_{i-1} < 0 and t_i > 0 then t_{i+1} < 0. Note that t_2 < 0, so the
 * signs of the t_i alternate: t_0 = 0, t_1 = 1, t_2 < 0, t_3 > 0, t_4 < 0, t_5
 * > 0, etc. The pattern for t is 0, 1, -, +, -, +, -, etc.
 *
 * The same holds for the s_i with flipped signs: note that s_2 = 1, then
 * s_0 = 1, s_1 = 0, s_2 = 1, s_3 < 0, s_4 > 0, s_5 < 0, etc.
 * The pattern for s is 1, 0, 1, -, +, -, +, etc.
 *
 *   | 0  1  2  3  4  5  6
 * ------------------------
 * s | 1  0  1  -  +  -  +
 * t | 0  1  -  +  -  +  -
 *
 * With i >= 1, |t_{i+1}| >= |t_i| + |t_{i-1}| > |t_i| because q_i >= 1 and
 * |t_i| > 0 and, since the signs are alternating, we have |t_{i-1} - q_i t_i|
 * = |t_{i-1}| + |q_i t_i|. Same goes for s_{i+1} w.r.t s_i and s_{i-1}.
 *
 *
 * Input
 * -----
 *  - No leading zeroes
 *  - A > B
 *  - (two bullets above imply |A| >= |B|)
 *
 *
 * Implementation details
 * ----------------------
 *
 * Here the implementation avoids computing with negative numbers and will only
 * output the absolute value of s_{k+1} and t_{k+1}. The signs can be recovered
 * from the number of steps of the algorithm (k). However, they do not matter
 * (really?): if the algorithm allowed a < b then the signs would be flipped.
 *
 * Note that s_i <= b and t_i <= a (proof?). Equality holds
 * when i = k+1 and a and b are coprime. Thus s_i can sit in an array as large
 * as b and same for t_i and a.
 *
 * @param {Number} r The radix.
 * @param {Array} a First input number <code>a>b</code>.
 * @param {Number} ai <code>a</code> left bound.
 * @param {Number} aj <code>a</code> right bound.
 * @param {Array} b Second input number <code>b<a</code>.
 * @param {Number} bi <code>b</code> left bound.
 * @param {Number} bj <code>b</code> right bound.
 */
function _eaa(r, a, ai, aj, b, bi, bj) {
	// R_0 = a
	var R0 = (0, _array._alloc)(aj - ai);
	_copy(a, ai, aj, R0, 0);
	var R0i = 0;
	var R0j = R0.length;

	// R_1 = b
	var R1 = (0, _array._alloc)(bj - bi);
	_copy(b, bi, bj, R1, 0);
	var R1i = 0;
	var R1j = R1.length;

	var Q = (0, _array._zeros)(aj - ai);
	var Qi = 0;
	var Qj = Q.length;

	// S_0 = 1
	var S0 = (0, _array._zeros)(bj - bi);
	var S0i = S0.length - 1;
	var S0j = S0.length;
	S0[S0j - 1] = 1;

	// S_1 = 0
	var S1 = (0, _array._zeros)(bj - bi);
	var S1i = S1.length;
	var S1j = S1.length;

	// T_0 = 0
	var T0 = (0, _array._zeros)(aj - ai);
	var T0i = T0.length;
	var T0j = T0.length;

	// T_1 = 1
	var T1 = (0, _array._zeros)(aj - ai);
	var T1i = T1.length - 1;
	var T1j = T1.length;
	T1[T1j - 1] = 1;

	var X = (0, _array._zeros)(aj - ai);
	var Xi = 0;
	var Xj = X.length;

	// We handle the first two steps outside of loop because s_1 = t_0 = 0
	// and s_1 = 0, s_2 = 1

	// Invariants
	// ----------
	//
	// 1. No leading zeros in R0
	// 2. No leading zeros in R1
	// 3. |Q| = |R0| (why ???)
	// 4. s_0 = S0 > 0
	// 5. s_1 = S1 < 0
	// 6. t_0 = T0 < 0
	// 7. t_1 = T1 > 0

	if (R1i === R1j) {
		return;
	}

	// Q_1 = (r_0 - r_2) / r_1
	// R0 is r_0 and becomes r_2
	// R1 is r_1
	// Q is q_1
	(0, _api._idivmod)(r, R0, R0i, R0j, R1, R1i, R1j, Q, Qi, Qj);

	// remove leading zeros from Q
	// since Q = R0 / R1 we have |R0| - |R1| <= |Q| <= |R0| - |R1| + 1
	Qi = Qj - (R1j - R1i + 1);
	if (Q[Qi] === 0) ++Qi;

	// remove leading zeros from R0
	// since R0 = R0 % R1 we have |R0| <= |R1|
	R0i = (0, _convert._trim_positive)(R0, R0j - (R1j - R1i), R0j);

	// s_2 = s_0 - q_1 * s_1 = s_0
	// S0 is s_0 and becomes s_2 i.e. NOTHING TO DO

	// t_2 = t_0 - q_1 * t_1 = q_1
	// T0 is t_0 and becomes t_2
	T0i = T0j - (Qj - Qi);
	_copy(Q, Qi, Qj, T0, T0i);

	// Invariants
	// ----------
	//
	// 1. No leading zeros in R0
	// 2. No leading zeros in R1
	// 3. |Q| = |R1| (why ???)
	// 4. s_1 = S1 < 0
	// 5. s_2 = S0 > 0
	// 6. t_1 = T1 > 0
	// 7. t_2 = T0 < 0

	if (R0i === R0j) {
		return;
	}

	// Q_2 = (r_1 - r_{i+1}) / r_2
	// R1 is r_1 and becomes r_3
	// R0 is r_2
	// Q is q_2
	(0, _api._idivmod)(r, R1, R1i, R1j, R0, R0i, R0j, Q, Qi, Qj);

	// remove leading zeros from Q
	// since Q = R1 / R0 we have |R1| - |R0| <= |Q| <= |R1| - |R0| + 1
	Qi = Qj - (R0j - R0i + 1);
	if (Q[Qi] === 0) ++Qi;

	// remove leading zeros from R1
	// since R1 = R1 % R0 we have |R1| <= |R0|
	R1i = (0, _convert._trim_positive)(R1, R1j - (R0j - R0i), R1j);

	// s_3 = s_1 - q_2 * s_2 = -q_2
	S1i = S1j - (Qj - Qi);
	_copy(Q, Qi, Qj, S1, S1i);

	// q_2 * t_2
	// since Q and T0 have no leading zeros then
	// Q * T0 has |Q| + |T0| - 1 <= |Q*T0| <= |Q| + |T0| limbs with no leading zeros.
	Xi = Xj - (Qj - Qi) - (T0j - T0i);
	(0, _api._mul)(r, Q, Qi, Qj, T0, T0i, T0j, X, Xi, Xj);
	// t_3 = t_1 - q_2 * t_2 = 1 - q_2 * t_2
	// T1 is t_1 and becomes t_3
	_increment(r, X, Xi, Xj);
	T1i = T1j - (Xj - Xi);
	_copy(X, Xi, Xj, T1, T1i);
	if (T1[T1i] === 0) ++T1i;

	while (true) {

		// Invariants
		// ----------
		//
		// 1. No leading zeros in R0
		// 2. No leading zeros in R1
		// 3. |Q| = |R0| (why ???)
		// 4. s_{i-1} = S0 > 0
		// 5. s_i = S1 < 0
		// 6. t_{i-1} = T0 < 0
		// 7. t_i = T1 > 0

		if (R1i === R1j) {
			break;
		}

		// Q_i = (r_{i-1} - r_{i+1}) / r_i
		// R0 is r_{i-1} and becomes r_{i+1}
		// R1 is r_i
		// Q is q_i
		(0, _api._idivmod)(r, R0, R0i, R0j, R1, R1i, R1j, Q, Qi, Qj);

		// remove leading zeros from Q
		// since Q = R0 / R1 we have |R0| - |R1| <= |Q| <= |R0| - |R1| + 1
		Qi = Qj - (R1j - R1i + 1);
		if (Q[Qi] === 0) ++Qi;

		// remove leading zeros from R0
		// since R0 = R0 % R1 we have |R0| <= |R1|
		R0i = (0, _convert._trim_positive)(R0, R0j - (R1j - R1i), R0j);

		// q_i * s_i
		// since Q and S1 have no leading zeros then
		// Q * S1 has |Q| + |S1| - 1 <= |Q*S1| <= |Q| + |S1| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (S1j - S1i);
		(0, _api._mul)(r, Q, Qi, Qj, S1, S1i, S1j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// s_{i+1} = s_{i-1} - q_i * s_i
		// S0 is s_{i-1} and becomes s_{i+1}
		S0i = S0j - (Xj - Xi + 1);
		(0, _ADD._IADD)(r, S0, S0i, S0j, X, Xi, Xj);
		if (S0[S0i] === 0) ++S0i;

		// q_i * t_i
		// since Q and T1 have no leading zeros then
		// Q * T1 has |Q| + |T1| - 1 <= |Q*T1| <= |Q| + |T1| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (T1j - T1i);
		(0, _api._mul)(r, Q, Qi, Qj, T1, T1i, T1j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// t_{i+1} = t_{i-1} - q_i * t_i
		// T0 is t_{i-1} and becomes t_{i+1}
		T0i = T0j - (Xj - Xi + 1);
		(0, _ADD._IADD)(r, T0, T0i, T0j, X, Xi, Xj);
		if (T0[T0i] === 0) ++T0i;

		// Invariants
		// ----------
		//
		// 1. No leading zeros in R0
		// 2. No leading zeros in R1
		// 3. |Q| = |R1| (why ???)
		// 4. s_{i-1} = S1 < 0
		// 5. s_i = S0 > 0
		// 6. t_{i-1} = T1 > 0
		// 7. t_i = T0 < 0

		if (R0i === R0j) {
			break;
		}

		// Q_i = (r_{i-1} - r_{i+1}) / r_i
		// R1 is r_{i-1} and becomes r_{i+1}
		// R0 is r_i
		// Q is q_i
		(0, _api._idivmod)(r, R1, R1i, R1j, R0, R0i, R0j, Q, Qi, Qj);

		// remove leading zeros from Q
		// since Q = R1 / R0 we have |R1| - |R0| <= |Q| <= |R1| - |R0| + 1
		Qi = Qj - (R0j - R0i + 1);
		if (Q[Qi] === 0) ++Qi;

		// remove leading zeros from R1
		// since R1 = R1 % R0 we have |R1| <= |R0|
		R1i = (0, _convert._trim_positive)(R1, R1j - (R0j - R0i), R1j);

		// q_i * s_i
		// since Q and S0 have no leading zeros then
		// Q * S0 has |Q| + |S0| - 1 <= |Q*S0| <= |Q| + |S0| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (S0j - S0i);
		(0, _api._mul)(r, Q, Qi, Qj, S0, S0i, S0j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// s_{i+1} = s_{i-1} - q_i * s_i
		// S1 is s_{i-1} and becomes s_{i+1}
		S1i = S1j - (Xj - Xi + 1);
		(0, _ADD._IADD)(r, S1, S1i, S1j, X, Xi, Xj);
		if (S1[S1i] === 0) ++S1i;

		// q_i * t_i
		// since Q and T0 have no leading zeros then
		// Q * T0 has |Q| + |T0| - 1 <= |Q*T0| <= |Q| + |T0| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (T0j - T0i);
		(0, _api._mul)(r, Q, Qi, Qj, T0, T0i, T0j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// t_{i+1} = t_{i-1} - q_i * t_i
		// T1 is t_{i-1} and becomes t_{i+1}
		T1i = T1j - (Xj - Xi + 1);
		(0, _ADD._IADD)(r, T1, T1i, T1j, X, Xi, Xj);
		if (T1[T1i] === 0) ++T1i;
	}
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb3JlL2FyaXRobWV0aWMvZ2NkL19lZWEuanMiXSwibmFtZXMiOlsiX2VhYSIsInIiLCJhIiwiYWkiLCJhaiIsImIiLCJiaSIsImJqIiwiUjAiLCJfY29weSIsIlIwaSIsIlIwaiIsImxlbmd0aCIsIlIxIiwiUjFpIiwiUjFqIiwiUSIsIlFpIiwiUWoiLCJTMCIsIlMwaSIsIlMwaiIsIlMxIiwiUzFpIiwiUzFqIiwiVDAiLCJUMGkiLCJUMGoiLCJUMSIsIlQxaSIsIlQxaiIsIlgiLCJYaSIsIlhqIiwiX2luY3JlbWVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUE2RWdCQSxJLEdBQUFBLEk7O0FBNUVoQjs7QUFFQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvRU8sU0FBU0EsSUFBVCxDQUFjQyxDQUFkLEVBQWlCQyxDQUFqQixFQUFvQkMsRUFBcEIsRUFBd0JDLEVBQXhCLEVBQTRCQyxDQUE1QixFQUErQkMsRUFBL0IsRUFBbUNDLEVBQW5DLEVBQXVDO0FBQzdDO0FBQ0EsS0FBTUMsS0FBSyxtQkFBT0osS0FBS0QsRUFBWixDQUFYO0FBQ0FNLE9BQU1QLENBQU4sRUFBU0MsRUFBVCxFQUFhQyxFQUFiLEVBQWlCSSxFQUFqQixFQUFxQixDQUFyQjtBQUNBLEtBQUlFLE1BQU0sQ0FBVjtBQUNBLEtBQU1DLE1BQU1ILEdBQUdJLE1BQWY7O0FBRUE7QUFDQSxLQUFNQyxLQUFLLG1CQUFPTixLQUFLRCxFQUFaLENBQVg7QUFDQUcsT0FBTUosQ0FBTixFQUFTQyxFQUFULEVBQWFDLEVBQWIsRUFBaUJNLEVBQWpCLEVBQXFCLENBQXJCO0FBQ0EsS0FBSUMsTUFBTSxDQUFWO0FBQ0EsS0FBTUMsTUFBTUYsR0FBR0QsTUFBZjs7QUFFQSxLQUFNSSxJQUFJLG1CQUFPWixLQUFLRCxFQUFaLENBQVY7QUFDQSxLQUFNYyxL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QixDQUFMLEVBQVFlLENBQVIsRUFBV0MsRUFBWCxFQUFlQyxFQUFmLEVBQW1CTyxFQUFuQixFQUF1QkMsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDSSxDQUFqQyxFQUFvQ0MsRUFBcEMsRUFBd0NDLEVBQXhDO0FBQ0EsTUFBS0YsRUFBRUMsRUFBRixNQUFVLENBQWYsRUFBbUIsRUFBRUEsRUFBRixDQXZHUCxDQXVHYTtBQUN6QjtBQUNBO0FBQ0FILFFBQU1DLE9BQU9HLEtBQUtELEVBQUwsR0FBVSxDQUFqQixDQUFOO0FBQ0Esa0JBQU0vQixDQUFOLEVBQVMyQixFQUFULEVBQWFDLEdBQWIsRUFBa0JDLEdBQWxCLEVBQXVCQyxDQUF2QixFQUEwQkMsRUFBMUIsRUFBOEJDLEVBQTlCO0FBQ0EsTUFBS0wsR0FBR0MsR0FBSCxNQUFZLENBQWpCLEVBQXFCLEVBQUVBLEdBQUY7QUFFckI7QUFFRCIsImZpbGUiOiJfZWVhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBfaWRpdm1vZCB9IGZyb20gJy4uLy4uLy4uL2FwaSdcbmltcG9ydCB7IF9tdWwgfSBmcm9tICcuLi8uLi8uLi9hcGknXG5pbXBvcnQgeyBfSUFERCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvYXJpdGhtZXRpYy9BREQnXG5pbXBvcnQgeyBfYWxsb2MgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2FycmF5J1xuaW1wb3J0IHsgX3plcm9zIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9hcnJheSdcbmltcG9ydCB7IF9qeiB9IGZyb20gJy4uLy4uLy4uL2NvcmUvY29tcGFyZSdcbmltcG9ydCB7IF90cmltX3Bvc2l0aXZlIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9jb252ZXJ0J1xuXG4vKipcbiAqIEV4dGVuZGVkIEV1Y2xpZGVhbiBhbGdvcml0aG0uXG4gKlxuICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FeHRlbmRlZF9FdWNsaWRlYW5fYWxnb3JpdGhtXG4gKlxuICogR2l2ZW4gdHdvIGlucHV0IGludGVnZXJzIGEgYW5kIGIsIGEgPiBiLlxuICogTGV0IHJfMCA9IGEsIHJfMSA9IGIsXG4gKiAgICAgc18wID0gMSwgc18xID0gMCxcbiAqICAgICB0XzAgPSAwLCB0XzEgPSAxIChGaWJvbmFjY2kgOndpbmtlbW9qaTopLlxuICpcbiAqIExldCByX3tpKzF9ID0gcl97aS0xfSAlIHJfaSAgICAgICAgICAgICAoZGl2aXNpb24gcmVtYWluZGVyKVxuICogTGV0IHFfaSA9IChyX3tpLTF9IC0gcl97aSsxfSkgLyByX2kgPiAwIChkaXZpc2lvbiBxdW90aWVudClcbiAqXG4gKiBBbiBhbHRlcm5hdGl2ZSBkZWZpbml0aW9uIGlzXG4gKiByX3tpKzF9ID0gcl97aS0xfSAtIHFfaSByX2kgICAgICAgKHdpdGggMCA8PSByX3tpKzF9IDwgcl9pKVxuICpcbiAqIFRoZW4gZGVmaW5lXG4gKiBzX3tpKzF9ID0gc197aS0xfSAtIHFfaSBzX2lcbiAqIHRfe2krMX0gPSB0X3tpLTF9IC0gcV9pIHRfaVxuICpcbiAqIExldCBrIGJlIHN1Y2ggdGhhdCByX2kgPiAwIGZvciBhbGwgaSA8PSBrIGFuZCByX3trKzF9ID0gMC5cbiAqXG4gKiBTaW5jZSBxX2kgPiAwLCBpZiB0X3tpLTF9ID4gMCBhbmQgdF9pIDwgMCB0aGVuIHRfe2krMX0gPiAwLiBPbiB0aGUgb3RoZXJcbiAqIGhhbmQsIGlmIHRfe2ktMX0gPCAwIGFuZCB0X2kgPiAwIHRoZW4gdF97aSsxfSA8IDAuIE5vdGUgdGhhdCB0XzIgPCAwLCBzbyB0aGVcbiAqIHNpZ25zIG9mIHRoZSB0X2kgYWx0ZXJuYXRlOiB0XzAgPSAwLCB0XzEgPSAxLCB0XzIgPCAwLCB0XzMgPiAwLCB0XzQgPCAwLCB0XzVcbiAqID4gMCwgZXRjLiBUaGUgcGF0dGVybiBmb3IgdCBpcyAwLCAxLCAtLCArLCAtLCArLCAtLCBldGMuXG4gKlxuICogVGhlIHNhbWUgaG9sZHMgZm9yIHRoZSBzX2kgd2l0aCBmbGlwcGVkIHNpZ25zOiBub3RlIHRoYXQgc18yID0gMSwgdGhlblxuICogc18wID0gMSwgc18xID0gMCwgc18yID0gMSwgc18zIDwgMCwgc180ID4gMCwgc181IDwgMCwgZXRjLlxuICogVGhlIHBhdHRlcm4gZm9yIHMgaXMgMSwgMCwgMSwgLSwgKywgLSwgKywgZXRjLlxuICpcbiAqICAgfCAwICAxICAyICAzICA0ICA1ICA2XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHMgfCAxICAwICAxICAtICArICAtICArXG4gKiB0IHwgMCAgMSAgLSAgKyAgLSAgKyAgLVxuICpcbiAqIFdpdGggaSA+PSAxLCB8dF97aSsxfXwgPj0gfHRfaXwgKyB8dF97aS0xfXwgPiB8dF9pfCBiZWNhdXNlIHFfaSA+PSAxIGFuZFxuICogfHRfaXwgPiAwIGFuZCwgc2luY2UgdGhlIHNpZ25zIGFyZSBhbHRlcm5hdGluZywgd2UgaGF2ZSB8dF97aS0xfSAtIHFfaSB0X2l8XG4gKiA9IHx0X3tpLTF9fCArIHxxX2kgdF9pfC4gU2FtZSBnb2VzIGZvciBzX3tpKzF9IHcuci50IHNfaSBhbmQgc197aS0xfS5cbiAqXG4gKlxuICogSW5wdXRcbiAqIC0tLS0tXG4gKiAgLSBObyBsZWFkaW5nIHplcm9lc1xuICogIC0gQSA+IEJcbiAqICAtICh0d28gYnVsbGV0cyBhYm92ZSBpbXBseSB8QXwgPj0gfEJ8KVxuICpcbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBkZXRhaWxzXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogSGVyZSB0aGUgaW1wbGVtZW50YXRpb24gYXZvaWRzIGNvbXB1dGluZyB3aXRoIG5lZ2F0aXZlIG51bWJlcnMgYW5kIHdpbGwgb25seVxuICogb3V0cHV0IHRoZSBhYnNvbHV0ZSB2YWx1ZSBvZiBzX3trKzF9IGFuZCB0X3trKzF9LiBUaGUgc2lnbnMgY2FuIGJlIHJlY292ZXJlZFxuICogZnJvbSB0aGUgbnVtYmVyIG9mIHN0ZXBzIG9mIHRoZSBhbGdvcml0aG0gKGspLiBIb3dldmVyLCB0aGV5IGRvIG5vdCBtYXR0ZXJcbiAqIChyZWFsbHk/KTogaWYgdGhlIGFsZ29yaXRobSBhbGxvd2VkIGEgPCBiIHRoZW4gdGhlIHNpZ25zIHdvdWxkIGJlIGZsaXBwZWQuXG4gKlxuICogTm90ZSB0aGF0IHNfaSA8PSBiIGFuZCB0X2kgPD0gYSAocHJvb2Y/KS4gRXF1YWxpdHkgaG9sZHNcbiAqIHdoZW4gaSA9IGsrMSBhbmQgYSBhbmQgYiBhcmUgY29wcmltZS4gVGh1cyBzX2kgY2FuIHNpdCBpbiBhbiBhcnJheSBhcyBsYXJnZVxuICogYXMgYiBhbmQgc2FtZSBmb3IgdF9pIGFuZCBhLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSByIFRoZSByYWRpeC5cbiAqIEBwYXJhbSB7QXJyYXl9IGEgRmlyc3QgaW5wdXQgbnVtYmVyIDxjb2RlPmE+YjwvY29kZT4uXG4gKiBAcGFyYW0ge051bWJlcn0gYWkgPGNvZGU+YTwvY29kZT4gbGVmdCBib3VuZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBhaiA8Y29kZT5hPC9jb2RlPiByaWdodCBib3VuZC5cbiAqIEBwYXJhbSB7QXJyYXl9IGIgU2Vjb25kIGlucHV0IG51bWJlciA8Y29kZT5iPGE8L2NvZGU+LlxuICogQHBhcmFtIHtOdW1iZXJ9IGJpIDxjb2RlPmI8L2NvZGU+IGxlZnQgYm91bmQuXG4gKiBAcGFyYW0ge051bWJlcn0gYmogPGNvZGU+YjwvY29kZT4gcmlnaHQgYm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZWFhKHIsIGEsIGFpLCBhaiwgYiwgYmksIGJqKSB7XG5cdC8vIFJfMCA9IGFcblx0Y29uc3QgUjAgPSBfYWxsb2MoYWogLSBhaSk7XG5cdF9jb3B5KGEsIGFpLCBhaiwgUjAsIDApO1xuXHRsZXQgUjBpID0gMDtcblx0Y29uc3QgUjBqID0gUjAubGVuZ3RoO1xuXG5cdC8vIFJfMSA9IGJcblx0Y29uc3QgUjEgPSBfYWxsb2MoYmogLSBiaSk7XG5cdF9jb3B5KGIsIGJpLCBiaiwgUjEsIDApO1xuXHRsZXQgUjFpID0gMDtcblx0Y29uc3QgUjFqID0gUjEubGVuZ3RoO1xuXG5cdGNvbnN0IFEgPSBfemVyb3MoYWogLSBhaSk7XG5cdGxldCAgIFFpID0gMDtcblx0Y29uc3QgUWogPSBRLmxlbmd0aDtcblxuXHQvLyBTXzAgPSAxXG5cdGNvbnN0IFMwID0gX3plcm9zKGJqIC0gYmkpO1xuXHRsZXQgUzBpID0gUzAubGVuZ3RoIC0gMTtcblx0Y29uc3QgUzBqID0gUzAubGVuZ3RoO1xuXHRTMFtTMGogLSAxXSA9IDE7XG5cblx0Ly8gU18xID0gMFxuXHRjb25zdCBTMSA9IF96ZXJvcyhiaiAtIGJpKTtcblx0bGV0IFMxaSA9IFMxLmxlbmd0aDtcblx0Y29uc3QgUzFqID0gUzEubGVuZ3RoO1xuXG5cdC8vIFRfMCA9IDBcblx0Y29uc3QgVDAgPSBfemVyb3MoYWogLSBhaSk7XG5cdGxldCBUMGkgPSBUMC5sZW5ndGg7XG5cdGNvbnN0IFQwaiA9IFQwLmxlbmd0aDtcblxuXHQvLyBUXzEgPSAxXG5cdGNvbnN0IFQxID0gX3plcm9zKGFqIC0gYWkpO1xuXHRsZXQgVDFpID0gVDEubGVuZ3RoIC0gMTtcblx0Y29uc3QgVDFqID0gVDEubGVuZ3RoO1xuXHRUMVtUMWogLSAxXSA9IDE7XG5cblx0Y29uc3QgWCA9IF96ZXJvcyhhaiAtIGFpKTtcblx0bGV0IFhpID0gMDtcblx0Y29uc3QgWGogPSBYLmxlbmd0aDtcblxuXHQvLyBXZSBoYW5kbGUgdGhlIGZpcnN0IHR3byBzdGVwcyBvdXRzaWRlIG9mIGxvb3AgYmVjYXVzZSBzXzEgPSB0XzAgPSAwXG5cdC8vIGFuZCBzXzEgPSAwLCBzXzIgPSAxXG5cblx0Ly8gSW52YXJpYW50c1xuXHQvLyAtLS0tLS0tLS0tXG5cdC8vXG5cdC8vIDEuIE5vIGxlYWRpbmcgemVyb3MgaW4gUjBcblx0Ly8gMi4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMVxuXHQvLyAzLiB8UXwgPSB8UjB8ICh3aHkgPz8/KVxuXHQvLyA0LiBzXzAgPSBTMCA+IDBcblx0Ly8gNS4gc18xID0gUzEgPCAwXG5cdC8vIDYuIHRfMCA9IFQwIDwgMFxuXHQvLyA3LiB0XzEgPSBUMSA+IDBcblxuXHRpZiAoIFIxaSA9PT0gUjFqICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFFfMSA9IChyXzAgLSByXzIpIC8gcl8xXG5cdC8vIFIwIGlzIHJfMCBhbmQgYmVjb21lcyByXzJcblx0Ly8gUjEgaXMgcl8xXG5cdC8vIFEgaXMgcV8xXG5cdF9pZGl2bW9kKHIsIFIwLCBSMGksIFIwaiwgUjEsIFIxaSwgUjFqLCBRLCBRaSwgUWopO1xuXG5cdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUVxuXHQvLyBzaW5jZSBRID0gUjAgLyBSMSB3ZSBoYXZlIHxSMHwgLSB8UjF8IDw9IHxRfCA8PSB8UjB8IC0gfFIxfCArIDFcblx0UWkgPSBRaiAtIChSMWogLSBSMWkgKyAxKSA7XG5cdGlmICggUVtRaV0gPT09IDAgKSArK1FpO1xuXG5cdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUjBcblx0Ly8gc2luY2UgUjAgPSBSMCAlIFIxIHdlIGhhdmUgfFIwfCA8PSB8UjF8XG5cdFIwaSA9IF90cmltX3Bvc2l0aXZlKCBSMCAsIFIwaiAtIChSMWogLSBSMWkpICwgUjBqKSA7XG5cblx0Ly8gc18yID0gc18wIC0gcV8xICogc18xID0gc18wXG5cdC8vIFMwIGlzIHNfMCBhbmQgYmVjb21lcyBzXzIgaS5lLiBOT1RISU5HIFRPIERPXG5cblx0Ly8gdF8yID0gdF8wIC0gcV8xICogdF8xID0gcV8xXG5cdC8vIFQwIGlzIHRfMCBhbmQgYmVjb21lcyB0XzJcblx0VDBpID0gVDBqIC0gKFFqIC0gUWkpIDtcblx0X2NvcHkoUSwgUWksIFFqLCBUMCwgVDBpKTtcblxuXHQvLyBJbnZhcmlhbnRzXG5cdC8vIC0tLS0tLS0tLS1cblx0Ly9cblx0Ly8gMS4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMFxuXHQvLyAyLiBObyBsZWFkaW5nIHplcm9zIGluIFIxXG5cdC8vIDMuIHxRfCA9IHxSMXwgKHdoeSA/Pz8pXG5cdC8vIDQuIHNfMSA9IFMxIDwgMFxuXHQvLyA1LiBzXzIgPSBTMCA+IDBcblx0Ly8gNi4gdF8xID0gVDEgPiAwXG5cdC8vIDcuIHRfMiA9IFQwIDwgMFxuXG5cdGlmICggUjBpID09PSBSMGogKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gUV8yID0gKHJfMSAtIHJfe2krMX0pIC8gcl8yXG5cdC8vIFIxIGlzIHJfMSBhbmQgYmVjb21lcyByXzNcblx0Ly8gUjAgaXMgcl8yXG5cdC8vIFEgaXMgcV8yXG5cdF9pZGl2bW9kKHIsIFIxLCBSMWksIFIxaiwgUjAsIFIwaSwgUjBqLCBRLCBRaSwgUWopO1xuXG5cdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUVxuXHQvLyBzaW5jZSBRID0gUjEgLyBSMCB3ZSBoYXZlIHxSMXwgLSB8UjB8IDw9IHxRfCA8PSB8UjF8IC0gfFIwfCArIDFcblx0UWkgPSBRaiAtIChSMGogLSBSMGkgKyAxKSA7XG5cdGlmICggUVtRaV0gPT09IDAgKSArK1FpO1xuXG5cdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUjFcblx0Ly8gc2luY2UgUjEgPSBSMSAlIFIwIHdlIGhhdmUgfFIxfCA8PSB8UjB8XG5cdFIxaSA9IF90cmltX3Bvc2l0aXZlKCBSMSAsIFIxaiAtIChSMGogLSBSMGkpICwgUjFqKSA7XG5cblx0Ly8gc18zID0gc18xIC0gcV8yICogc18yID0gLXFfMlxuXHRTMWkgPSBTMWogLSAoUWogLSBRaSkgO1xuXHRfY29weShRLCBRaSwgUWosIFMxLCBTMWkpO1xuXG5cdC8vIHFfMiAqIHRfMlxuXHQvLyBzaW5jZSBRIGFuZCBUMCBoYXZlIG5vIGxlYWRpbmcgemVyb3MgdGhlblxuXHQvLyBRICogVDAgaGFzIHxRfCArIHxUMHwgLSAxIDw9IHxRKlQwfCA8PSB8UXwgKyB8VDB8IGxpbWJzIHdpdGggbm8gbGVhZGluZyB6ZXJvcy5cblx0WGkgPSBYaiAtIChRaiAtIFFpKSAtIChUMGogLSBUMGkpIDtcblx0X211bChyLCBRLCBRaSwgUWosIFQwLCBUMGksIFQwaiwgWCwgWGksIFhqKTtcblx0Ly8gdF8zID0gdF8xIC0gcV8yICogdF8yID0gMSAtIHFfMiAqIHRfMlxuXHQvLyBUMSBpcyB0XzEgYW5kIGJlY29tZXMgdF8zXG5cdF9pbmNyZW1lbnQociwgWCwgWGksIFhqKTtcblx0VDFpID0gVDFqIC0gKFhqIC0gWGkpIDtcblx0X2NvcHkoWCwgWGksIFhqLCBUMSwgVDFpKTtcblx0aWYgKCBUMVtUMWldID09PSAwICkgKytUMWk7XG5cblx0d2hpbGUgKHRydWUpIHtcblxuXHRcdC8vIEludmFyaWFudHNcblx0XHQvLyAtLS0tLS0tLS0tXG5cdFx0Ly9cblx0XHQvLyAxLiBObyBsZWFkaW5nIHplcm9zIGluIFIwXG5cdFx0Ly8gMi4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMVxuXHRcdC8vIDMuIHxRfCA9IHxSMHwgKHdoeSA/Pz8pXG5cdFx0Ly8gNC4gc197aS0xfSA9IFMwID4gMFxuXHRcdC8vIDUuIHNfaSA9IFMxIDwgMFxuXHRcdC8vIDYuIHRfe2ktMX0gPSBUMCA8IDBcblx0XHQvLyA3LiB0X2kgPSBUMSA+IDBcblxuXHRcdGlmICggUjFpID09PSBSMWogKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBRX2kgPSAocl97aS0xfSAtIHJfe2krMX0pIC8gcl9pXG5cdFx0Ly8gUjAgaXMgcl97aS0xfSBhbmQgYmVjb21lcyByX3tpKzF9XG5cdFx0Ly8gUjEgaXMgcl9pXG5cdFx0Ly8gUSBpcyBxX2lcblx0XHRfaWRpdm1vZChyLCBSMCwgUjBpLCBSMGosIFIxLCBSMWksIFIxaiwgUSwgUWksIFFqKTtcblxuXHRcdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUVxuXHRcdC8vIHNpbmNlIFEgPSBSMCAvIFIxIHdlIGhhdmUgfFIwfCAtIHxSMXwgPD0gfFF8IDw9IHxSMHwgLSB8UjF8ICsgMVxuXHRcdFFpID0gUWogLSAoUjFqIC0gUjFpICsgMSkgO1xuXHRcdGlmICggUVtRaV0gPT09IDAgKSArK1FpO1xuXG5cdFx0Ly8gcmVtb3ZlIGxlYWRpbmcgemVyb3MgZnJvbSBSMFxuXHRcdC8vIHNpbmNlIFIwID0gUjAgJSBSMSB3ZSBoYXZlIHxSMHwgPD0gfFIxfFxuXHRcdFIwaSA9IF90cmltX3Bvc2l0aXZlKCBSMCAsIFIwaiAtIChSMWogLSBSMWkpICwgUjBqKSA7XG5cblx0XHQvLyBxX2kgKiBzX2lcblx0XHQvLyBzaW5jZSBRIGFuZCBTMSBoYXZlIG5vIGxlYWRpbmcgemVyb3MgdGhlblxuXHRcdC8vIFEgKiBTMSBoYXMgfFF8ICsgfFMxfCAtIDEgPD0gfFEqUzF8IDw9IHxRfCArIHxTMXwgbGltYnMgd2l0aCBubyBsZWFkaW5nIHplcm9zLlxuXHRcdFhpID0gWGogLSAoUWogLSBRaSkgLSAoUzFqIC0gUzFpKSA7XG5cdFx0X211bChyLCBRLCBRaSwgUWosIFMxLCBTMWksIFMxaiwgWCwgWGksIFhqKTtcblx0XHRpZiAoIFhbWGldID09PSAwICkgKytYaTsgLy8gcmVtb3ZlIGxlYWRpbmcgemVybyBpZiBubyBjYXJyeVxuXHRcdC8vIHNfe2krMX0gPSBzX3tpLTF9IC0gcV9pICogc19pXG5cdFx0Ly8gUzAgaXMgc197aS0xfSBhbmQgYmVjb21lcyBzX3tpKzF9XG5cdFx0UzBpID0gUzBqIC0gKFhqIC0gWGkgKyAxKSA7XG5cdFx0X0lBREQociwgUzAsIFMwaSwgUzBqLCBYLCBYaSwgWGopO1xuXHRcdGlmICggUzBbUzBpXSA9PT0gMCApICsrUzBpO1xuXG5cdFx0Ly8gcV9pICogdF9pXG5cdFx0Ly8gc2luY2UgUSBhbmQgVDEgaGF2ZSBubyBsZWFkaW5nIHplcm9zIHRoZW5cblx0XHQvLyBRICogVDEgaGFzIHxRfCArIHxUMXwgLSAxIDw9IHxRKlQxfCA8PSB8UXwgKyB8VDF8IGxpbWJzIHdpdGggbm8gbGVhZGluZyB6ZXJvcy5cblx0XHRYaSA9IFhqIC0gKFFqIC0gUWkpIC0gKFQxaiAtIFQxaSkgO1xuXHRcdF9tdWwociwgUSwgUWksIFFqLCBUMSwgVDFpLCBUMWosIFgsIFhpLCBYaik7XG5cdFx0aWYgKCBYW1hpXSA9PT0gMCApICsrWGk7IC8vIHJlbW92ZSBsZWFkaW5nIHplcm8gaWYgbm8gY2Fycnlcblx0XHQvLyB0X3tpKzF9ID0gdF97aS0xfSAtIHFfaSAqIHRfaVxuXHRcdC8vIFQwIGlzIHRfe2ktMX0gYW5kIGJlY29tZXMgdF97aSsxfVxuXHRcdFQwaSA9IFQwaiAtIChYaiAtIFhpICsgMSkgO1xuXHRcdF9JQUREKHIsIFQwLCBUMGksIFQwaiwgWCwgWGksIFhqKTtcblx0XHRpZiAoIFQwW1QwaV0gPT09IDAgKSArK1QwaTtcblxuXHRcdC8vIEludmFyaWFudHNcblx0XHQvLyAtLS0tLS0tLS0tXG5cdFx0Ly9cblx0XHQvLyAxLiBObyBsZWFkaW5nIHplcm9zIGluIFIwXG5cdFx0Ly8gMi4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMVxuXHRcdC8vIDMuIHxRfCA9IHxSMXwgKHdoeSA/Pz8pXG5cdFx0Ly8gNC4gc197aS0xfSA9IFMxIDwgMFxuXHRcdC8vIDUuIHNfaSA9IFMwID4gMFxuXHRcdC8vIDYuIHRfe2ktMX0gPSBUMSA+IDBcblx0XHQvLyA3LiB0X2kgPSBUMCA8IDBcblxuXHRcdGlmICggUjBpID09PSBSMGogKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBRX2kgPSAocl97aS0xfSAtIHJfe2krMX0pIC8gcl9pXG5cdFx0Ly8gUjEgaXMgcl97aS0xfSBhbmQgYmVjb21lcyByX3tpKzF9XG5cdFx0Ly8gUjAgaXMgcl9pXG5cdFx0Ly8gUSBpcyBxX2lcblx0XHRfaWRpdm1vZChyLCBSMSwgUjFpLCBSMWosIFIwLCBSMGksIFIwaiwgUSwgUWksIFFqKTtcblxuXHRcdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUVxuXHRcdC8vIHNpbmNlIFEgPSBSMSAvIFIwIHdlIGhhdmUgfFIxfCAtIHxSMHwgPD0gfFF8IDw9IHxSMXwgLSB8UjB8ICsgMVxuXHRcdFFpID0gUWogLSAoUjBqIC0gUjBpICsgMSkgO1xuXHRcdGlmICggUVtRaV0gPT09IDAgKSArK1FpO1xuXG5cdFx0Ly8gcmVtb3ZlIGxlYWRpbmcgemVyb3MgZnJvbSBSMVxuXHRcdC8vIHNpbmNlIFIxID0gUjEgJSBSMCB3ZSBoYXZlIHxSMXwgPD0gfFIwfFxuXHRcdFIxaSA9IF90cmltX3Bvc2l0aXZlKCBSMSAsIFIxaiAtIChSMGogLSBSMGkpICwgUjFqKSA7XG5cblx0XHQvLyBxX2kgKiBzX2lcblx0XHQvLyBzaW5jZSBRIGFuZCBTMCBoYXZlIG5vIGxlYWRpbmcgemVyb3MgdGhlblxuXHRcdC8vIFEgKiBTMCBoYXMgfFF8ICsgfFMwfCAtIDEgPD0gfFEqUzB8IDw9IHxRfCArIHxTMHwgbGltYnMgd2l0aCBubyBsZWFkaW5nIHplcm9zLlxuXHRcdFhpID0gWGogLSAoUWogLSBRaSkgLSAoUzBqIC0gUzBpKSA7XG5cdFx0X211bChyLCBRLCBRaSwgUWosIFMwLCBTMGksIFMwaiwgWCwgWGksIFhqKTtcblx0XHRpZiAoIFhbWGldID09PSAwICkgKytYaTsgLy8gcmVtb3ZlIGxlYWRpbmcgemVybyBpZiBubyBjYXJyeVxuXHRcdC8vIHNfe2krMX0gPSBzX3tpLTF9IC0gcV9pICogc19pXG5cdFx0Ly8gUzEgaXMgc197aS0xfSBhbmQgYmVjb21lcyBzX3tpKzF9XG5cdFx0UzFpID0gUzFqIC0gKFhqIC0gWGkgKyAxKSA7XG5cdFx0X0lBREQociwgUzEsIFMxaSwgUzFqLCBYLCBYaSwgWGopO1xuXHRcdGlmICggUzFbUzFpXSA9PT0gMCApICsrUzFpO1xuXG5cdFx0Ly8gcV9pICogdF9pXG5cdFx0Ly8gc2luY2UgUSBhbmQgVDAgaGF2ZSBubyBsZWFkaW5nIHplcm9zIHRoZW5cblx0XHQvLyBRICogVDAgaGFzIHxRfCArIHxUMHwgLSAxIDw9IHxRKlQwfCA8PSB8UXwgKyB8VDB8IGxpbWJzIHdpdGggbm8gbGVhZGluZyB6ZXJvcy5cblx0XHRYaSA9IFhqIC0gKFFqIC0gUWkpIC0gKFQwaiAtIFQwaSkgO1xuXHRcdF9tdWwociwgUSwgUWksIFFqLCBUMCwgVDBpLCBUMGosIFgsIFhpLCBYaik7XG5cdFx0aWYgKCBYW1hpXSA9PT0gMCApICsrWGk7IC8vIHJlbW92ZSBsZWFkaW5nIHplcm8gaWYgbm8gY2Fycnlcblx0XHQvLyB0X3tpKzF9ID0gdF97aS0xfSAtIHFfaSAqIHRfaVxuXHRcdC8vIFQxIGlzIHRfe2ktMX0gYW5kIGJlY29tZXMgdF97aSsxfVxuXHRcdFQxaSA9IFQxaiAtIChYaiAtIFhpICsgMSkgO1xuXHRcdF9JQUREKHIsIFQxLCBUMWksIFQxaiwgWCwgWGksIFhqKTtcblx0XHRpZiAoIFQxW1QxaV0gPT09IDAgKSArK1QxaTtcblxuXHR9XG5cbn1cbiJdfQ==