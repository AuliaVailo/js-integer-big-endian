'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports._eaa = _eaa;

var _api = require('../../../api');

var _add = require('../../../core/arithmetic/add');

var _array = require('../../../core/array');

var _compare = require('../../../core/compare');

var _convert = require('../../../core/convert');

/**
 * Extended Euclidean algorithm.
 *
 * @see https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm
 *
 * Given two input integers a and b, a > b.
 * Let r_0 = a, r_1 = b,
 *     s_0 = 1, s_1 = 0,
 *     t_0 = 0, t_1 = 1 (Fibonacci :winkemoji:).
 *
 * Let r_{i+1} = r_{i-1} % r_i             (division remainder)
 * Let q_i = (r_{i-1} - r_{i+1}) / r_i > 0 (division quotient)
 *
 * An alternative definition is
 * r_{i+1} = r_{i-1} - q_i r_i       (with 0 <= r_{i+1} < r_i)
 *
 * Then define
 * s_{i+1} = s_{i-1} - q_i s_i
 * t_{i+1} = t_{i-1} - q_i t_i
 *
 * Let k be such that r_i > 0 for all i <= k and r_{k+1} = 0.
 *
 * Since q_i > 0, if t_{i-1} > 0 and t_i < 0 then t_{i+1} > 0. On the other
 * hand, if t_{i-1} < 0 and t_i > 0 then t_{i+1} < 0. Note that t_2 < 0, so the
 * signs of the t_i alternate: t_0 = 0, t_1 = 1, t_2 < 0, t_3 > 0, t_4 < 0, t_5
 * > 0, etc. The pattern for t is 0, 1, -, +, -, +, -, etc.
 *
 * The same holds for the s_i with flipped signs: note that s_2 = 1, then
 * s_0 = 1, s_1 = 0, s_2 = 1, s_3 < 0, s_4 > 0, s_5 < 0, etc.
 * The pattern for s is 1, 0, 1, -, +, -, +, etc.
 *
 *   | 0  1  2  3  4  5  6
 * ------------------------
 * s | 1  0  1  -  +  -  +
 * t | 0  1  -  +  -  +  -
 *
 * With i >= 1, |t_{i+1}| >= |t_i| + |t_{i-1}| > |t_i| because q_i >= 1 and
 * |t_i| > 0 and, since the signs are alternating, we have |t_{i-1} - q_i t_i|
 * = |t_{i-1}| + |q_i t_i|. Same goes for s_{i+1} w.r.t s_i and s_{i-1}.
 *
 *
 * Input
 * -----
 *  - No leading zeroes
 *  - A > B
 *  - (two bullets above imply |A| >= |B|)
 *
 *
 * Implementation details
 * ----------------------
 *
 * Here the implementation avoids computing with negative numbers and will only
 * output the absolute value of s_{k+1} and t_{k+1}. The signs can be recovered
 * from the number of steps of the algorithm (k). However, they do not matter
 * (really?): if the algorithm allowed a < b then the signs would be flipped.
 *
 * Note that s_i <= b and t_i <= a (proof?). Equality holds
 * when i = k+1 and a and b are coprime. Thus s_i can sit in an array as large
 * as b and same for t_i and a.
 *
 * @param {Number} r The radix.
 * @param {Array} a First input number <code>a>b</code>.
 * @param {Number} ai <code>a</code> left bound.
 * @param {Number} aj <code>a</code> right bound.
 * @param {Array} b Second input number <code>b<a</code>.
 * @param {Number} bi <code>b</code> left bound.
 * @param {Number} bj <code>b</code> right bound.
 */
function _eaa(r, a, ai, aj, b, bi, bj) {
	// R_0 = a
	var R0 = (0, _array._alloc)(aj - ai);
	_copy(a, ai, aj, R0, 0);
	var R0i = 0;
	var R0j = R0.length;

	// R_1 = b
	var R1 = (0, _array._alloc)(bj - bi);
	_copy(b, bi, bj, R1, 0);
	var R1i = 0;
	var R1j = R1.length;

	var Q = (0, _array._zeros)(aj - ai);
	var Qi = 0;
	var Qj = Q.length;

	// S_0 = 1
	var S0 = (0, _array._zeros)(bj - bi);
	var S0i = S0.length - 1;
	var S0j = S0.length;
	S0[S0j - 1] = 1;

	// S_1 = 0
	var S1 = (0, _array._zeros)(bj - bi);
	var S1i = S1.length;
	var S1j = S1.length;

	// T_0 = 0
	var T0 = (0, _array._zeros)(aj - ai);
	var T0i = T0.length;
	var T0j = T0.length;

	// T_1 = 1
	var T1 = (0, _array._zeros)(aj - ai);
	var T1i = T1.length - 1;
	var T1j = T1.length;
	T1[T1j - 1] = 1;

	var X = (0, _array._zeros)(aj - ai);
	var Xi = 0;
	var Xj = X.length;

	// We handle the first two steps outside of loop because s_1 = t_0 = 0
	// and s_1 = 0, s_2 = 1

	// Invariants
	// ----------
	//
	// 1. No leading zeros in R0
	// 2. No leading zeros in R1
	// 3. |Q| = |R0| (why ???)
	// 4. s_0 = S0 > 0
	// 5. s_1 = S1 < 0
	// 6. t_0 = T0 < 0
	// 7. t_1 = T1 > 0

	if (R1i === R1j) {
		return;
	}

	// Q_1 = (r_0 - r_2) / r_1
	// R0 is r_0 and becomes r_2
	// R1 is r_1
	// Q is q_1
	(0, _api._idivmod)(r, R0, R0i, R0j, R1, R1i, R1j, Q, Qi, Qj);

	// remove leading zeros from Q
	// since Q = R0 / R1 we have |R0| - |R1| <= |Q| <= |R0| - |R1| + 1
	Qi = Qj - (R1j - R1i + 1);
	if (Q[Qi] === 0) ++Qi;

	// remove leading zeros from R0
	// since R0 = R0 % R1 we have |R0| <= |R1|
	R0i = (0, _convert._trim_positive)(R0, R0j - (R1j - R1i), R0j);

	// s_2 = s_0 - q_1 * s_1 = s_0
	// S0 is s_0 and becomes s_2 i.e. NOTHING TO DO

	// t_2 = t_0 - q_1 * t_1 = q_1
	// T0 is t_0 and becomes t_2
	T0i = T0j - (Qj - Qi);
	_copy(Q, Qi, Qj, T0, T0i);

	// Invariants
	// ----------
	//
	// 1. No leading zeros in R0
	// 2. No leading zeros in R1
	// 3. |Q| = |R1| (why ???)
	// 4. s_1 = S1 < 0
	// 5. s_2 = S0 > 0
	// 6. t_1 = T1 > 0
	// 7. t_2 = T0 < 0

	if (R0i === R0j) {
		return;
	}

	// Q_2 = (r_1 - r_{i+1}) / r_2
	// R1 is r_1 and becomes r_3
	// R0 is r_2
	// Q is q_2
	(0, _api._idivmod)(r, R1, R1i, R1j, R0, R0i, R0j, Q, Qi, Qj);

	// remove leading zeros from Q
	// since Q = R1 / R0 we have |R1| - |R0| <= |Q| <= |R1| - |R0| + 1
	Qi = Qj - (R0j - R0i + 1);
	if (Q[Qi] === 0) ++Qi;

	// remove leading zeros from R1
	// since R1 = R1 % R0 we have |R1| <= |R0|
	R1i = (0, _convert._trim_positive)(R1, R1j - (R0j - R0i), R1j);

	// s_3 = s_1 - q_2 * s_2 = -q_2
	S1i = S1j - (Qj - Qi);
	_copy(Q, Qi, Qj, S1, S1i);

	// q_2 * t_2
	// since Q and T0 have no leading zeros then
	// Q * T0 has |Q| + |T0| - 1 <= |Q*T0| <= |Q| + |T0| limbs with no leading zeros.
	Xi = Xj - (Qj - Qi) - (T0j - T0i);
	(0, _api.mul)(r, Q, Qi, Qj, T0, T0i, T0j, X, Xi, Xj);
	// t_3 = t_1 - q_2 * t_2 = 1 - q_2 * t_2
	// T1 is t_1 and becomes t_3
	_increment(r, X, Xi, Xj);
	T1i = T1j - (Xj - Xi);
	_copy(X, Xi, Xj, T1, T1i);
	if (T1[T1i] === 0) ++T1i;

	while (true) {

		// Invariants
		// ----------
		//
		// 1. No leading zeros in R0
		// 2. No leading zeros in R1
		// 3. |Q| = |R0| (why ???)
		// 4. s_{i-1} = S0 > 0
		// 5. s_i = S1 < 0
		// 6. t_{i-1} = T0 < 0
		// 7. t_i = T1 > 0

		if (R1i === R1j) {
			break;
		}

		// Q_i = (r_{i-1} - r_{i+1}) / r_i
		// R0 is r_{i-1} and becomes r_{i+1}
		// R1 is r_i
		// Q is q_i
		(0, _api._idivmod)(r, R0, R0i, R0j, R1, R1i, R1j, Q, Qi, Qj);

		// remove leading zeros from Q
		// since Q = R0 / R1 we have |R0| - |R1| <= |Q| <= |R0| - |R1| + 1
		Qi = Qj - (R1j - R1i + 1);
		if (Q[Qi] === 0) ++Qi;

		// remove leading zeros from R0
		// since R0 = R0 % R1 we have |R0| <= |R1|
		R0i = (0, _convert._trim_positive)(R0, R0j - (R1j - R1i), R0j);

		// q_i * s_i
		// since Q and S1 have no leading zeros then
		// Q * S1 has |Q| + |S1| - 1 <= |Q*S1| <= |Q| + |S1| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (S1j - S1i);
		(0, _api.mul)(r, Q, Qi, Qj, S1, S1i, S1j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// s_{i+1} = s_{i-1} - q_i * s_i
		// S0 is s_{i-1} and becomes s_{i+1}
		S0i = S0j - (Xj - Xi + 1);
		(0, _add._IADD)(r, S0, S0i, S0j, X, Xi, Xj);
		if (S0[S0i] === 0) ++S0i;

		// q_i * t_i
		// since Q and T1 have no leading zeros then
		// Q * T1 has |Q| + |T1| - 1 <= |Q*T1| <= |Q| + |T1| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (T1j - T1i);
		(0, _api.mul)(r, Q, Qi, Qj, T1, T1i, T1j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// t_{i+1} = t_{i-1} - q_i * t_i
		// T0 is t_{i-1} and becomes t_{i+1}
		T0i = T0j - (Xj - Xi + 1);
		(0, _add._IADD)(r, T0, T0i, T0j, X, Xi, Xj);
		if (T0[T0i] === 0) ++T0i;

		// Invariants
		// ----------
		//
		// 1. No leading zeros in R0
		// 2. No leading zeros in R1
		// 3. |Q| = |R1| (why ???)
		// 4. s_{i-1} = S1 < 0
		// 5. s_i = S0 > 0
		// 6. t_{i-1} = T1 > 0
		// 7. t_i = T0 < 0

		if (R0i === R0j) {
			break;
		}

		// Q_i = (r_{i-1} - r_{i+1}) / r_i
		// R1 is r_{i-1} and becomes r_{i+1}
		// R0 is r_i
		// Q is q_i
		(0, _api._idivmod)(r, R1, R1i, R1j, R0, R0i, R0j, Q, Qi, Qj);

		// remove leading zeros from Q
		// since Q = R1 / R0 we have |R1| - |R0| <= |Q| <= |R1| - |R0| + 1
		Qi = Qj - (R0j - R0i + 1);
		if (Q[Qi] === 0) ++Qi;

		// remove leading zeros from R1
		// since R1 = R1 % R0 we have |R1| <= |R0|
		R1i = (0, _convert._trim_positive)(R1, R1j - (R0j - R0i), R1j);

		// q_i * s_i
		// since Q and S0 have no leading zeros then
		// Q * S0 has |Q| + |S0| - 1 <= |Q*S0| <= |Q| + |S0| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (S0j - S0i);
		(0, _api.mul)(r, Q, Qi, Qj, S0, S0i, S0j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// s_{i+1} = s_{i-1} - q_i * s_i
		// S1 is s_{i-1} and becomes s_{i+1}
		S1i = S1j - (Xj - Xi + 1);
		(0, _add._IADD)(r, S1, S1i, S1j, X, Xi, Xj);
		if (S1[S1i] === 0) ++S1i;

		// q_i * t_i
		// since Q and T0 have no leading zeros then
		// Q * T0 has |Q| + |T0| - 1 <= |Q*T0| <= |Q| + |T0| limbs with no leading zeros.
		Xi = Xj - (Qj - Qi) - (T0j - T0i);
		(0, _api.mul)(r, Q, Qi, Qj, T0, T0i, T0j, X, Xi, Xj);
		if (X[Xi] === 0) ++Xi; // remove leading zero if no carry
		// t_{i+1} = t_{i-1} - q_i * t_i
		// T1 is t_{i-1} and becomes t_{i+1}
		T1i = T1j - (Xj - Xi + 1);
		(0, _add._IADD)(r, T1, T1i, T1j, X, Xi, Xj);
		if (T1[T1i] === 0) ++T1i;
	}
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb3JlL2FyaXRobWV0aWMvZ2NkL19lZWEuanMiXSwibmFtZXMiOlsiX2VhYSIsInIiLCJhIiwiYWkiLCJhaiIsImIiLCJiaSIsImJqIiwiUjAiLCJfY29weSIsIlIwaSIsIlIwaiIsImxlbmd0aCIsIlIxIiwiUjFpIiwiUjFqIiwiUSIsIlFpIiwiUWoiLCJTMCIsIlMwaSIsIlMwaiIsIlMxIiwiUzFpIiwiUzFqIiwiVDAiLCJUMGkiLCJUMGoiLCJUMSIsIlQxaSIsIlQxaiIsIlgiLCJYaSIsIlhqIiwiX2luY3JlbWVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUE2RWdCQSxJLEdBQUFBLEk7O0FBNUVoQjs7QUFFQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvRU8sU0FBU0EsSUFBVCxDQUFjQyxDQUFkLEVBQWlCQyxDQUFqQixFQUFvQkMsRUFBcEIsRUFBd0JDLEVBQXhCLEVBQTRCQyxDQUE1QixFQUErQkMsRUFBL0IsRUFBbUNDLEVBQW5DLEVBQXVDO0FBQzdDO0FBQ0EsS0FBTUMsS0FBSyxtQkFBT0osS0FBS0QsRUFBWixDQUFYO0FBQ0FNLE9BQU1QLENBQU4sRUFBU0MsRUFBVCxFQUFhQyxFQUFiLEVBQWlCSSxFQUFqQixFQUFxQixDQUFyQjtBQUNBLEtBQUlFLE1BQU0sQ0FBVjtBQUNBLEtBQU1DLE1BQU1ILEdBQUdJLE1BQWY7O0FBRUE7QUFDQSxLQUFNQyxLQUFLLG1CQUFPTixLQUFLRCxFQUFaLENBQVg7QUFDQUcsT0FBTUosQ0FBTixFQUFTQyxFQUFULEVBQWFDLEVBQWIsRUFBaUJNLEVBQWpCLEVBQXFCLENBQXJCO0FBQ0EsS0FBSUMsTUFBTSxDQUFWO0FBQ0EsS0FBTUMsTUFBTUYsR0FBR0QsTUFBZjs7QUFFQSxLQUFNSSxJQUFJLG1CQUFPWixLQUFLRCxFQUFaLENBQVY7QUFDQSxLQUFNYyxL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LENBQUosRUFBT2UsQ0FBUCxFQUFVQyxFQUFWLEVBQWNDLEVBQWQsRUFBa0JPLEVBQWxCLEVBQXNCQyxHQUF0QixFQUEyQkMsR0FBM0IsRUFBZ0NJLENBQWhDLEVBQW1DQyxFQUFuQyxFQUF1Q0MsRUFBdkM7QUFDQSxNQUFLRixFQUFFQyxFQUFGLE1BQVUsQ0FBZixFQUFtQixFQUFFQSxFQUFGLENBdkdQLENBdUdhO0FBQ3pCO0FBQ0E7QUFDQUgsUUFBTUMsT0FBT0csS0FBS0QsRUFBTCxHQUFVLENBQWpCLENBQU47QUFDQSxrQkFBTS9CLENBQU4sRUFBUzJCLEVBQVQsRUFBYUMsR0FBYixFQUFrQkMsR0FBbEIsRUFBdUJDLENBQXZCLEVBQTBCQyxFQUExQixFQUE4QkMsRUFBOUI7QUFDQSxNQUFLTCxHQUFHQyxHQUFILE1BQVksQ0FBakIsRUFBcUIsRUFBRUEsR0FBRjtBQUVyQjtBQUVEIiwiZmlsZSI6Il9lZWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IF9pZGl2bW9kIH0gZnJvbSAnLi4vLi4vLi4vYXBpJ1xuaW1wb3J0IHsgbXVsIH0gZnJvbSAnLi4vLi4vLi4vYXBpJ1xuaW1wb3J0IHsgX0lBREQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2FyaXRobWV0aWMvYWRkJ1xuaW1wb3J0IHsgX2FsbG9jIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9hcnJheSdcbmltcG9ydCB7IF96ZXJvcyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvYXJyYXknXG5pbXBvcnQgeyBfanogfSBmcm9tICcuLi8uLi8uLi9jb3JlL2NvbXBhcmUnXG5pbXBvcnQgeyBfdHJpbV9wb3NpdGl2ZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvY29udmVydCdcblxuLyoqXG4gKiBFeHRlbmRlZCBFdWNsaWRlYW4gYWxnb3JpdGhtLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXh0ZW5kZWRfRXVjbGlkZWFuX2FsZ29yaXRobVxuICpcbiAqIEdpdmVuIHR3byBpbnB1dCBpbnRlZ2VycyBhIGFuZCBiLCBhID4gYi5cbiAqIExldCByXzAgPSBhLCByXzEgPSBiLFxuICogICAgIHNfMCA9IDEsIHNfMSA9IDAsXG4gKiAgICAgdF8wID0gMCwgdF8xID0gMSAoRmlib25hY2NpIDp3aW5rZW1vamk6KS5cbiAqXG4gKiBMZXQgcl97aSsxfSA9IHJfe2ktMX0gJSByX2kgICAgICAgICAgICAgKGRpdmlzaW9uIHJlbWFpbmRlcilcbiAqIExldCBxX2kgPSAocl97aS0xfSAtIHJfe2krMX0pIC8gcl9pID4gMCAoZGl2aXNpb24gcXVvdGllbnQpXG4gKlxuICogQW4gYWx0ZXJuYXRpdmUgZGVmaW5pdGlvbiBpc1xuICogcl97aSsxfSA9IHJfe2ktMX0gLSBxX2kgcl9pICAgICAgICh3aXRoIDAgPD0gcl97aSsxfSA8IHJfaSlcbiAqXG4gKiBUaGVuIGRlZmluZVxuICogc197aSsxfSA9IHNfe2ktMX0gLSBxX2kgc19pXG4gKiB0X3tpKzF9ID0gdF97aS0xfSAtIHFfaSB0X2lcbiAqXG4gKiBMZXQgayBiZSBzdWNoIHRoYXQgcl9pID4gMCBmb3IgYWxsIGkgPD0gayBhbmQgcl97aysxfSA9IDAuXG4gKlxuICogU2luY2UgcV9pID4gMCwgaWYgdF97aS0xfSA+IDAgYW5kIHRfaSA8IDAgdGhlbiB0X3tpKzF9ID4gMC4gT24gdGhlIG90aGVyXG4gKiBoYW5kLCBpZiB0X3tpLTF9IDwgMCBhbmQgdF9pID4gMCB0aGVuIHRfe2krMX0gPCAwLiBOb3RlIHRoYXQgdF8yIDwgMCwgc28gdGhlXG4gKiBzaWducyBvZiB0aGUgdF9pIGFsdGVybmF0ZTogdF8wID0gMCwgdF8xID0gMSwgdF8yIDwgMCwgdF8zID4gMCwgdF80IDwgMCwgdF81XG4gKiA+IDAsIGV0Yy4gVGhlIHBhdHRlcm4gZm9yIHQgaXMgMCwgMSwgLSwgKywgLSwgKywgLSwgZXRjLlxuICpcbiAqIFRoZSBzYW1lIGhvbGRzIGZvciB0aGUgc19pIHdpdGggZmxpcHBlZCBzaWduczogbm90ZSB0aGF0IHNfMiA9IDEsIHRoZW5cbiAqIHNfMCA9IDEsIHNfMSA9IDAsIHNfMiA9IDEsIHNfMyA8IDAsIHNfNCA+IDAsIHNfNSA8IDAsIGV0Yy5cbiAqIFRoZSBwYXR0ZXJuIGZvciBzIGlzIDEsIDAsIDEsIC0sICssIC0sICssIGV0Yy5cbiAqXG4gKiAgIHwgMCAgMSAgMiAgMyAgNCAgNSAgNlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBzIHwgMSAgMCAgMSAgLSAgKyAgLSAgK1xuICogdCB8IDAgIDEgIC0gICsgIC0gICsgIC1cbiAqXG4gKiBXaXRoIGkgPj0gMSwgfHRfe2krMX18ID49IHx0X2l8ICsgfHRfe2ktMX18ID4gfHRfaXwgYmVjYXVzZSBxX2kgPj0gMSBhbmRcbiAqIHx0X2l8ID4gMCBhbmQsIHNpbmNlIHRoZSBzaWducyBhcmUgYWx0ZXJuYXRpbmcsIHdlIGhhdmUgfHRfe2ktMX0gLSBxX2kgdF9pfFxuICogPSB8dF97aS0xfXwgKyB8cV9pIHRfaXwuIFNhbWUgZ29lcyBmb3Igc197aSsxfSB3LnIudCBzX2kgYW5kIHNfe2ktMX0uXG4gKlxuICpcbiAqIElucHV0XG4gKiAtLS0tLVxuICogIC0gTm8gbGVhZGluZyB6ZXJvZXNcbiAqICAtIEEgPiBCXG4gKiAgLSAodHdvIGJ1bGxldHMgYWJvdmUgaW1wbHkgfEF8ID49IHxCfClcbiAqXG4gKlxuICogSW1wbGVtZW50YXRpb24gZGV0YWlsc1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIEhlcmUgdGhlIGltcGxlbWVudGF0aW9uIGF2b2lkcyBjb21wdXRpbmcgd2l0aCBuZWdhdGl2ZSBudW1iZXJzIGFuZCB3aWxsIG9ubHlcbiAqIG91dHB1dCB0aGUgYWJzb2x1dGUgdmFsdWUgb2Ygc197aysxfSBhbmQgdF97aysxfS4gVGhlIHNpZ25zIGNhbiBiZSByZWNvdmVyZWRcbiAqIGZyb20gdGhlIG51bWJlciBvZiBzdGVwcyBvZiB0aGUgYWxnb3JpdGhtIChrKS4gSG93ZXZlciwgdGhleSBkbyBub3QgbWF0dGVyXG4gKiAocmVhbGx5Pyk6IGlmIHRoZSBhbGdvcml0aG0gYWxsb3dlZCBhIDwgYiB0aGVuIHRoZSBzaWducyB3b3VsZCBiZSBmbGlwcGVkLlxuICpcbiAqIE5vdGUgdGhhdCBzX2kgPD0gYiBhbmQgdF9pIDw9IGEgKHByb29mPykuIEVxdWFsaXR5IGhvbGRzXG4gKiB3aGVuIGkgPSBrKzEgYW5kIGEgYW5kIGIgYXJlIGNvcHJpbWUuIFRodXMgc19pIGNhbiBzaXQgaW4gYW4gYXJyYXkgYXMgbGFyZ2VcbiAqIGFzIGIgYW5kIHNhbWUgZm9yIHRfaSBhbmQgYS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gciBUaGUgcmFkaXguXG4gKiBAcGFyYW0ge0FycmF5fSBhIEZpcnN0IGlucHV0IG51bWJlciA8Y29kZT5hPmI8L2NvZGU+LlxuICogQHBhcmFtIHtOdW1iZXJ9IGFpIDxjb2RlPmE8L2NvZGU+IGxlZnQgYm91bmQuXG4gKiBAcGFyYW0ge051bWJlcn0gYWogPGNvZGU+YTwvY29kZT4gcmlnaHQgYm91bmQuXG4gKiBAcGFyYW0ge0FycmF5fSBiIFNlY29uZCBpbnB1dCBudW1iZXIgPGNvZGU+YjxhPC9jb2RlPi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBiaSA8Y29kZT5iPC9jb2RlPiBsZWZ0IGJvdW5kLlxuICogQHBhcmFtIHtOdW1iZXJ9IGJqIDxjb2RlPmI8L2NvZGU+IHJpZ2h0IGJvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gX2VhYShyLCBhLCBhaSwgYWosIGIsIGJpLCBiaikge1xuXHQvLyBSXzAgPSBhXG5cdGNvbnN0IFIwID0gX2FsbG9jKGFqIC0gYWkpO1xuXHRfY29weShhLCBhaSwgYWosIFIwLCAwKTtcblx0bGV0IFIwaSA9IDA7XG5cdGNvbnN0IFIwaiA9IFIwLmxlbmd0aDtcblxuXHQvLyBSXzEgPSBiXG5cdGNvbnN0IFIxID0gX2FsbG9jKGJqIC0gYmkpO1xuXHRfY29weShiLCBiaSwgYmosIFIxLCAwKTtcblx0bGV0IFIxaSA9IDA7XG5cdGNvbnN0IFIxaiA9IFIxLmxlbmd0aDtcblxuXHRjb25zdCBRID0gX3plcm9zKGFqIC0gYWkpO1xuXHRsZXQgICBRaSA9IDA7XG5cdGNvbnN0IFFqID0gUS5sZW5ndGg7XG5cblx0Ly8gU18wID0gMVxuXHRjb25zdCBTMCA9IF96ZXJvcyhiaiAtIGJpKTtcblx0bGV0IFMwaSA9IFMwLmxlbmd0aCAtIDE7XG5cdGNvbnN0IFMwaiA9IFMwLmxlbmd0aDtcblx0UzBbUzBqIC0gMV0gPSAxO1xuXG5cdC8vIFNfMSA9IDBcblx0Y29uc3QgUzEgPSBfemVyb3MoYmogLSBiaSk7XG5cdGxldCBTMWkgPSBTMS5sZW5ndGg7XG5cdGNvbnN0IFMxaiA9IFMxLmxlbmd0aDtcblxuXHQvLyBUXzAgPSAwXG5cdGNvbnN0IFQwID0gX3plcm9zKGFqIC0gYWkpO1xuXHRsZXQgVDBpID0gVDAubGVuZ3RoO1xuXHRjb25zdCBUMGogPSBUMC5sZW5ndGg7XG5cblx0Ly8gVF8xID0gMVxuXHRjb25zdCBUMSA9IF96ZXJvcyhhaiAtIGFpKTtcblx0bGV0IFQxaSA9IFQxLmxlbmd0aCAtIDE7XG5cdGNvbnN0IFQxaiA9IFQxLmxlbmd0aDtcblx0VDFbVDFqIC0gMV0gPSAxO1xuXG5cdGNvbnN0IFggPSBfemVyb3MoYWogLSBhaSk7XG5cdGxldCBYaSA9IDA7XG5cdGNvbnN0IFhqID0gWC5sZW5ndGg7XG5cblx0Ly8gV2UgaGFuZGxlIHRoZSBmaXJzdCB0d28gc3RlcHMgb3V0c2lkZSBvZiBsb29wIGJlY2F1c2Ugc18xID0gdF8wID0gMFxuXHQvLyBhbmQgc18xID0gMCwgc18yID0gMVxuXG5cdC8vIEludmFyaWFudHNcblx0Ly8gLS0tLS0tLS0tLVxuXHQvL1xuXHQvLyAxLiBObyBsZWFkaW5nIHplcm9zIGluIFIwXG5cdC8vIDIuIE5vIGxlYWRpbmcgemVyb3MgaW4gUjFcblx0Ly8gMy4gfFF8ID0gfFIwfCAod2h5ID8/Pylcblx0Ly8gNC4gc18wID0gUzAgPiAwXG5cdC8vIDUuIHNfMSA9IFMxIDwgMFxuXHQvLyA2LiB0XzAgPSBUMCA8IDBcblx0Ly8gNy4gdF8xID0gVDEgPiAwXG5cblx0aWYgKCBSMWkgPT09IFIxaiApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBRXzEgPSAocl8wIC0gcl8yKSAvIHJfMVxuXHQvLyBSMCBpcyByXzAgYW5kIGJlY29tZXMgcl8yXG5cdC8vIFIxIGlzIHJfMVxuXHQvLyBRIGlzIHFfMVxuXHRfaWRpdm1vZChyLCBSMCwgUjBpLCBSMGosIFIxLCBSMWksIFIxaiwgUSwgUWksIFFqKTtcblxuXHQvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyBmcm9tIFFcblx0Ly8gc2luY2UgUSA9IFIwIC8gUjEgd2UgaGF2ZSB8UjB8IC0gfFIxfCA8PSB8UXwgPD0gfFIwfCAtIHxSMXwgKyAxXG5cdFFpID0gUWogLSAoUjFqIC0gUjFpICsgMSkgO1xuXHRpZiAoIFFbUWldID09PSAwICkgKytRaTtcblxuXHQvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyBmcm9tIFIwXG5cdC8vIHNpbmNlIFIwID0gUjAgJSBSMSB3ZSBoYXZlIHxSMHwgPD0gfFIxfFxuXHRSMGkgPSBfdHJpbV9wb3NpdGl2ZSggUjAgLCBSMGogLSAoUjFqIC0gUjFpKSAsIFIwaikgO1xuXG5cdC8vIHNfMiA9IHNfMCAtIHFfMSAqIHNfMSA9IHNfMFxuXHQvLyBTMCBpcyBzXzAgYW5kIGJlY29tZXMgc18yIGkuZS4gTk9USElORyBUTyBET1xuXG5cdC8vIHRfMiA9IHRfMCAtIHFfMSAqIHRfMSA9IHFfMVxuXHQvLyBUMCBpcyB0XzAgYW5kIGJlY29tZXMgdF8yXG5cdFQwaSA9IFQwaiAtIChRaiAtIFFpKSA7XG5cdF9jb3B5KFEsIFFpLCBRaiwgVDAsIFQwaSk7XG5cblx0Ly8gSW52YXJpYW50c1xuXHQvLyAtLS0tLS0tLS0tXG5cdC8vXG5cdC8vIDEuIE5vIGxlYWRpbmcgemVyb3MgaW4gUjBcblx0Ly8gMi4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMVxuXHQvLyAzLiB8UXwgPSB8UjF8ICh3aHkgPz8/KVxuXHQvLyA0LiBzXzEgPSBTMSA8IDBcblx0Ly8gNS4gc18yID0gUzAgPiAwXG5cdC8vIDYuIHRfMSA9IFQxID4gMFxuXHQvLyA3LiB0XzIgPSBUMCA8IDBcblxuXHRpZiAoIFIwaSA9PT0gUjBqICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFFfMiA9IChyXzEgLSByX3tpKzF9KSAvIHJfMlxuXHQvLyBSMSBpcyByXzEgYW5kIGJlY29tZXMgcl8zXG5cdC8vIFIwIGlzIHJfMlxuXHQvLyBRIGlzIHFfMlxuXHRfaWRpdm1vZChyLCBSMSwgUjFpLCBSMWosIFIwLCBSMGksIFIwaiwgUSwgUWksIFFqKTtcblxuXHQvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyBmcm9tIFFcblx0Ly8gc2luY2UgUSA9IFIxIC8gUjAgd2UgaGF2ZSB8UjF8IC0gfFIwfCA8PSB8UXwgPD0gfFIxfCAtIHxSMHwgKyAxXG5cdFFpID0gUWogLSAoUjBqIC0gUjBpICsgMSkgO1xuXHRpZiAoIFFbUWldID09PSAwICkgKytRaTtcblxuXHQvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyBmcm9tIFIxXG5cdC8vIHNpbmNlIFIxID0gUjEgJSBSMCB3ZSBoYXZlIHxSMXwgPD0gfFIwfFxuXHRSMWkgPSBfdHJpbV9wb3NpdGl2ZSggUjEgLCBSMWogLSAoUjBqIC0gUjBpKSAsIFIxaikgO1xuXG5cdC8vIHNfMyA9IHNfMSAtIHFfMiAqIHNfMiA9IC1xXzJcblx0UzFpID0gUzFqIC0gKFFqIC0gUWkpIDtcblx0X2NvcHkoUSwgUWksIFFqLCBTMSwgUzFpKTtcblxuXHQvLyBxXzIgKiB0XzJcblx0Ly8gc2luY2UgUSBhbmQgVDAgaGF2ZSBubyBsZWFkaW5nIHplcm9zIHRoZW5cblx0Ly8gUSAqIFQwIGhhcyB8UXwgKyB8VDB8IC0gMSA8PSB8USpUMHwgPD0gfFF8ICsgfFQwfCBsaW1icyB3aXRoIG5vIGxlYWRpbmcgemVyb3MuXG5cdFhpID0gWGogLSAoUWogLSBRaSkgLSAoVDBqIC0gVDBpKSA7XG5cdG11bChyLCBRLCBRaSwgUWosIFQwLCBUMGksIFQwaiwgWCwgWGksIFhqKTtcblx0Ly8gdF8zID0gdF8xIC0gcV8yICogdF8yID0gMSAtIHFfMiAqIHRfMlxuXHQvLyBUMSBpcyB0XzEgYW5kIGJlY29tZXMgdF8zXG5cdF9pbmNyZW1lbnQociwgWCwgWGksIFhqKTtcblx0VDFpID0gVDFqIC0gKFhqIC0gWGkpIDtcblx0X2NvcHkoWCwgWGksIFhqLCBUMSwgVDFpKTtcblx0aWYgKCBUMVtUMWldID09PSAwICkgKytUMWk7XG5cblx0d2hpbGUgKHRydWUpIHtcblxuXHRcdC8vIEludmFyaWFudHNcblx0XHQvLyAtLS0tLS0tLS0tXG5cdFx0Ly9cblx0XHQvLyAxLiBObyBsZWFkaW5nIHplcm9zIGluIFIwXG5cdFx0Ly8gMi4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMVxuXHRcdC8vIDMuIHxRfCA9IHxSMHwgKHdoeSA/Pz8pXG5cdFx0Ly8gNC4gc197aS0xfSA9IFMwID4gMFxuXHRcdC8vIDUuIHNfaSA9IFMxIDwgMFxuXHRcdC8vIDYuIHRfe2ktMX0gPSBUMCA8IDBcblx0XHQvLyA3LiB0X2kgPSBUMSA+IDBcblxuXHRcdGlmICggUjFpID09PSBSMWogKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBRX2kgPSAocl97aS0xfSAtIHJfe2krMX0pIC8gcl9pXG5cdFx0Ly8gUjAgaXMgcl97aS0xfSBhbmQgYmVjb21lcyByX3tpKzF9XG5cdFx0Ly8gUjEgaXMgcl9pXG5cdFx0Ly8gUSBpcyBxX2lcblx0XHRfaWRpdm1vZChyLCBSMCwgUjBpLCBSMGosIFIxLCBSMWksIFIxaiwgUSwgUWksIFFqKTtcblxuXHRcdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUVxuXHRcdC8vIHNpbmNlIFEgPSBSMCAvIFIxIHdlIGhhdmUgfFIwfCAtIHxSMXwgPD0gfFF8IDw9IHxSMHwgLSB8UjF8ICsgMVxuXHRcdFFpID0gUWogLSAoUjFqIC0gUjFpICsgMSkgO1xuXHRcdGlmICggUVtRaV0gPT09IDAgKSArK1FpO1xuXG5cdFx0Ly8gcmVtb3ZlIGxlYWRpbmcgemVyb3MgZnJvbSBSMFxuXHRcdC8vIHNpbmNlIFIwID0gUjAgJSBSMSB3ZSBoYXZlIHxSMHwgPD0gfFIxfFxuXHRcdFIwaSA9IF90cmltX3Bvc2l0aXZlKCBSMCAsIFIwaiAtIChSMWogLSBSMWkpICwgUjBqKSA7XG5cblx0XHQvLyBxX2kgKiBzX2lcblx0XHQvLyBzaW5jZSBRIGFuZCBTMSBoYXZlIG5vIGxlYWRpbmcgemVyb3MgdGhlblxuXHRcdC8vIFEgKiBTMSBoYXMgfFF8ICsgfFMxfCAtIDEgPD0gfFEqUzF8IDw9IHxRfCArIHxTMXwgbGltYnMgd2l0aCBubyBsZWFkaW5nIHplcm9zLlxuXHRcdFhpID0gWGogLSAoUWogLSBRaSkgLSAoUzFqIC0gUzFpKSA7XG5cdFx0bXVsKHIsIFEsIFFpLCBRaiwgUzEsIFMxaSwgUzFqLCBYLCBYaSwgWGopO1xuXHRcdGlmICggWFtYaV0gPT09IDAgKSArK1hpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvIGlmIG5vIGNhcnJ5XG5cdFx0Ly8gc197aSsxfSA9IHNfe2ktMX0gLSBxX2kgKiBzX2lcblx0XHQvLyBTMCBpcyBzX3tpLTF9IGFuZCBiZWNvbWVzIHNfe2krMX1cblx0XHRTMGkgPSBTMGogLSAoWGogLSBYaSArIDEpIDtcblx0XHRfSUFERChyLCBTMCwgUzBpLCBTMGosIFgsIFhpLCBYaik7XG5cdFx0aWYgKCBTMFtTMGldID09PSAwICkgKytTMGk7XG5cblx0XHQvLyBxX2kgKiB0X2lcblx0XHQvLyBzaW5jZSBRIGFuZCBUMSBoYXZlIG5vIGxlYWRpbmcgemVyb3MgdGhlblxuXHRcdC8vIFEgKiBUMSBoYXMgfFF8ICsgfFQxfCAtIDEgPD0gfFEqVDF8IDw9IHxRfCArIHxUMXwgbGltYnMgd2l0aCBubyBsZWFkaW5nIHplcm9zLlxuXHRcdFhpID0gWGogLSAoUWogLSBRaSkgLSAoVDFqIC0gVDFpKSA7XG5cdFx0bXVsKHIsIFEsIFFpLCBRaiwgVDEsIFQxaSwgVDFqLCBYLCBYaSwgWGopO1xuXHRcdGlmICggWFtYaV0gPT09IDAgKSArK1hpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvIGlmIG5vIGNhcnJ5XG5cdFx0Ly8gdF97aSsxfSA9IHRfe2ktMX0gLSBxX2kgKiB0X2lcblx0XHQvLyBUMCBpcyB0X3tpLTF9IGFuZCBiZWNvbWVzIHRfe2krMX1cblx0XHRUMGkgPSBUMGogLSAoWGogLSBYaSArIDEpIDtcblx0XHRfSUFERChyLCBUMCwgVDBpLCBUMGosIFgsIFhpLCBYaik7XG5cdFx0aWYgKCBUMFtUMGldID09PSAwICkgKytUMGk7XG5cblx0XHQvLyBJbnZhcmlhbnRzXG5cdFx0Ly8gLS0tLS0tLS0tLVxuXHRcdC8vXG5cdFx0Ly8gMS4gTm8gbGVhZGluZyB6ZXJvcyBpbiBSMFxuXHRcdC8vIDIuIE5vIGxlYWRpbmcgemVyb3MgaW4gUjFcblx0XHQvLyAzLiB8UXwgPSB8UjF8ICh3aHkgPz8/KVxuXHRcdC8vIDQuIHNfe2ktMX0gPSBTMSA8IDBcblx0XHQvLyA1LiBzX2kgPSBTMCA+IDBcblx0XHQvLyA2LiB0X3tpLTF9ID0gVDEgPiAwXG5cdFx0Ly8gNy4gdF9pID0gVDAgPCAwXG5cblx0XHRpZiAoIFIwaSA9PT0gUjBqICkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Ly8gUV9pID0gKHJfe2ktMX0gLSByX3tpKzF9KSAvIHJfaVxuXHRcdC8vIFIxIGlzIHJfe2ktMX0gYW5kIGJlY29tZXMgcl97aSsxfVxuXHRcdC8vIFIwIGlzIHJfaVxuXHRcdC8vIFEgaXMgcV9pXG5cdFx0X2lkaXZtb2QociwgUjEsIFIxaSwgUjFqLCBSMCwgUjBpLCBSMGosIFEsIFFpLCBRaik7XG5cblx0XHQvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyBmcm9tIFFcblx0XHQvLyBzaW5jZSBRID0gUjEgLyBSMCB3ZSBoYXZlIHxSMXwgLSB8UjB8IDw9IHxRfCA8PSB8UjF8IC0gfFIwfCArIDFcblx0XHRRaSA9IFFqIC0gKFIwaiAtIFIwaSArIDEpIDtcblx0XHRpZiAoIFFbUWldID09PSAwICkgKytRaTtcblxuXHRcdC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIGZyb20gUjFcblx0XHQvLyBzaW5jZSBSMSA9IFIxICUgUjAgd2UgaGF2ZSB8UjF8IDw9IHxSMHxcblx0XHRSMWkgPSBfdHJpbV9wb3NpdGl2ZSggUjEgLCBSMWogLSAoUjBqIC0gUjBpKSAsIFIxaikgO1xuXG5cdFx0Ly8gcV9pICogc19pXG5cdFx0Ly8gc2luY2UgUSBhbmQgUzAgaGF2ZSBubyBsZWFkaW5nIHplcm9zIHRoZW5cblx0XHQvLyBRICogUzAgaGFzIHxRfCArIHxTMHwgLSAxIDw9IHxRKlMwfCA8PSB8UXwgKyB8UzB8IGxpbWJzIHdpdGggbm8gbGVhZGluZyB6ZXJvcy5cblx0XHRYaSA9IFhqIC0gKFFqIC0gUWkpIC0gKFMwaiAtIFMwaSkgO1xuXHRcdG11bChyLCBRLCBRaSwgUWosIFMwLCBTMGksIFMwaiwgWCwgWGksIFhqKTtcblx0XHRpZiAoIFhbWGldID09PSAwICkgKytYaTsgLy8gcmVtb3ZlIGxlYWRpbmcgemVybyBpZiBubyBjYXJyeVxuXHRcdC8vIHNfe2krMX0gPSBzX3tpLTF9IC0gcV9pICogc19pXG5cdFx0Ly8gUzEgaXMgc197aS0xfSBhbmQgYmVjb21lcyBzX3tpKzF9XG5cdFx0UzFpID0gUzFqIC0gKFhqIC0gWGkgKyAxKSA7XG5cdFx0X0lBREQociwgUzEsIFMxaSwgUzFqLCBYLCBYaSwgWGopO1xuXHRcdGlmICggUzFbUzFpXSA9PT0gMCApICsrUzFpO1xuXG5cdFx0Ly8gcV9pICogdF9pXG5cdFx0Ly8gc2luY2UgUSBhbmQgVDAgaGF2ZSBubyBsZWFkaW5nIHplcm9zIHRoZW5cblx0XHQvLyBRICogVDAgaGFzIHxRfCArIHxUMHwgLSAxIDw9IHxRKlQwfCA8PSB8UXwgKyB8VDB8IGxpbWJzIHdpdGggbm8gbGVhZGluZyB6ZXJvcy5cblx0XHRYaSA9IFhqIC0gKFFqIC0gUWkpIC0gKFQwaiAtIFQwaSkgO1xuXHRcdG11bChyLCBRLCBRaSwgUWosIFQwLCBUMGksIFQwaiwgWCwgWGksIFhqKTtcblx0XHRpZiAoIFhbWGldID09PSAwICkgKytYaTsgLy8gcmVtb3ZlIGxlYWRpbmcgemVybyBpZiBubyBjYXJyeVxuXHRcdC8vIHRfe2krMX0gPSB0X3tpLTF9IC0gcV9pICogdF9pXG5cdFx0Ly8gVDEgaXMgdF97aS0xfSBhbmQgYmVjb21lcyB0X3tpKzF9XG5cdFx0VDFpID0gVDFqIC0gKFhqIC0gWGkgKyAxKSA7XG5cdFx0X0lBREQociwgVDEsIFQxaSwgVDFqLCBYLCBYaSwgWGopO1xuXHRcdGlmICggVDFbVDFpXSA9PT0gMCApICsrVDFpO1xuXG5cdH1cblxufVxuIl19